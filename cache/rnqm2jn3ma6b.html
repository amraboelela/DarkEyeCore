<!DOCTYPE html>
<html lang="was" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>fuss:debian [Wizardry and Steamworks]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="fuss,debian"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/opensearch.php" title="Wizardry and Steamworks"/>
<link rel="start" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/"/>
<link rel="contents" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian?do=index" title="Sitemap"/>
<link rel="manifest" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Changes" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/feed.php?mode=list&amp;ns=fuss"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_export/xhtml/fuss/debian"/>
<link rel="canonical" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian"/>
<link rel="stylesheet" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/css.php?t=was&amp;tseed=24551d22639bdaeb736aec3dca86fd82"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='fuss';var JSINFO = {"plugin_imagemap_mldummy":"http:\/\/3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion\/_media\/wiki\/dokuwiki-128.png","isadmin":0,"isauth":0,"plugin_pdfjs":{"hide_download_button":0},"plugins":{"vshare":{"youtube":"youtube\\.com\/.*[&?]v=([a-z0-9_\\-]+)","vimeo":"vimeo\\.com\\\/(\\d+)","slideshare":"slideshare.*id=(\\d+)","dailymotion":"dailymotion\\.com\/video\/([a-z0-9]+)","archiveorg":"archive\\.org\/(?:embed|details)\/([a-zA-Z0-9_\\-]+)","soundcloud":"soundcloud\\.com\/([\\w-]+\/[\\w-]+)","niconico":"nicovideo\\.jp\/watch\/(sm[0-9]+)","bitchute":"bitchute\\.com\\\/video\\\/([a-zA-Z0-9_\\-]+)","coub":"coub\\.com\\\/view\\\/([a-zA-Z0-9_\\-]+)","odysee":"odysee\\.com\/\\$\/(?:embed|download)\/([-%_?=\/a-zA-Z0-9]+)","youku":"v\\.youku\\.com\/v_show\/id_([0-9A-Za-z=]+)\\.html","bilibili":"bilibili\\.com\\\/video\\\/(BV[0-9A-Za-z]+)","msoffice":"(?:office\\.com.*[&?]videoid=([a-z0-9\\-]+))","msstream":"microsoftstream\\.com\\\/video\\\/([a-f0-9\\-]{36})"}},"id":"fuss:debian","namespace":"fuss","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script charset="utf-8" src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/jquery.php?tseed=34a552433bc33cc9c3bc32527289a0b2"></script>
<script charset="utf-8" src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/js.php?t=was&amp;tseed=24551d22639bdaeb736aec3dca86fd82&amp;template=was"></script>
<!--<![endif]-->
    <!-- <link rel="shortcut icon" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/favicon.ico" />
<link rel="apple-touch-icon" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/apple-touch-icon.png" />
 -->
    <!-- Viewport -->
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!-- Favicon -->
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png?v=2">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png?v=2">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png?v=2">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png?v=2">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png?v=2">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png?v=2">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png?v=2">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png?v=2">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png?v=2">
<link rel="icon" type="image/png" href="/favicon-32x32.png?v=2" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png?v=2" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png?v=2" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png?v=2" sizes="16x16">
<link rel="manifest" href="/manifest.json?v=2">
<link rel="shortcut icon" href="/favicon.ico?v=2">
<meta name="apple-mobile-web-app-title" content="[Wizardry and Steamworks]">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png?v=2">
<meta name="application-name" content="[Wizardry and Steamworks]">
<meta name="theme-color" content="#ffffff">
    <!-- <script async type="text/javascript" src="/lib/tpl/was/loadCSS.js"></script>
    <script async type="text/javascript" src="/lib/tpl/was/cssrelpreload.js"></script> -->
</head>

<body>
    <!--[if lte IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_was     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header">

	    
	<!-- ********** TOP BAR ********** -->
	<div class="bar" id="bar__top">
		<div class="bar-left" id="bar__topleft">
			<form class="button btn_login" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian"><div class="no"><input type="hidden" name="do" value="login" /><input type="hidden" name="sectok" value="" /><button type="submit" title="Log In">Log In</button></div></form>						<form class="button btn_revs" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian"><div class="no"><input type="hidden" name="do" value="revisions" /><button type="submit" accesskey="o" title="Revisions [O]">Revisions</button></div></form>						<form class="button btn_pdf" action="?do=export_pdf" method="POST">
			    <button type="submit" title="PDF">PDF</button>
                        </form>
		</div>
		<div class="bar-center">
		        <form class="button btn_home" action="/" method="POST">
                            <button type="submit" title="Home">Home</button>
                        </form>
			<form action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="fuss:debian" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>			<!-- <form id="osssearchform" method="get" action="renderer">
        <input type="hidden" name="use" value="grimore.org">
        <input type="hidden" name="name" value="default">
        <input type="text" id="osssearchbox" name="query">
        <input type="hidden" name="login" value="search">
        <input type="hidden" name="key" value="1a5f74ab3f4df6ce883c4c158540e25e">
        <input type="submit" value="Search">
</form>
 -->
		</div>
		<div class="bar-right" id="bar__topright">
		        <form class="button btn_contact" action="mailto:%6F%66%66%69%63%65%40%67%72%69%6D%6F%72%65%2E%6F%72%67" method="POST">
			    <button type="submit" title="Contact">Contact</button>
                        </form>
                        <form class="button btn_news" action="/feed.php?type=rss2&amp;ns=fuss:debian&amp;linkto=page&amp;content=abstract" method="POST">
			    <button type="submit" title="News">News</button>
                        </form>
			<form class="button btn_admin" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian"><div class="no"><input type="hidden" name="do" value="admin" /><button type="submit" title="Admin">Admin</button></div></form>								</div>
			</div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss" class="wikilink1" title="fuss" data-wiki-id="fuss">fuss</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian" class="wikilink1" title="fuss:debian" data-wiki-id="fuss:debian">debian</a></bdi></div>
                                </div>
    
    <hr class="a11y" />
</div><!-- /header -->

        <div class="wrapper group">

            <!--  -->

            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <!-- <div class="pageId"><span>fuss:debian</span></div> -->

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#determine_fastest_mirror">Determine Fastest Mirror</a></div></li>
<li class="level1"><div class="li"><a href="#extract_package">Extract Package</a></div></li>
<li class="level1"><div class="li"><a href="#hold_package">Hold Package</a></div></li>
<li class="level1"><div class="li"><a href="#recompile_kernel">Recompile Kernel</a></div></li>
<li class="level1"><div class="li"><a href="#determine_what_package_a_file_belongs_to">Determine What Package a File Belongs To</a></div></li>
<li class="level1"><div class="li"><a href="#cpan_modules_as_debian_packages">CPAN Modules as Debian Packages</a></div></li>
<li class="level1"><div class="li"><a href="#repair_filesystem_on_boot">Repair Filesystem on Boot</a></div></li>
<li class="level1"><div class="li"><a href="#install_packages_from_different_debian_release">Install Packages from Different Debian Release</a></div></li>
<li class="level1"><div class="li"><a href="#install_from_backports">Install From Backports</a></div></li>
<li class="level1"><div class="li"><a href="#boot_iso_with_grub">Boot ISO with Grub</a></div></li>
<li class="level1"><div class="li"><a href="#install_extra_netfilter_modules">Install Extra Netfilter Modules</a></div></li>
<li class="level1"><div class="li"><a href="#change_the_time_zone">Change the Time Zone</a></div></li>
<li class="level1"><div class="li"><a href="#list_all_packages_not_installed_automatically">List All Packages Not Installed Automatically</a></div></li>
<li class="level1"><div class="li"><a href="#enable_periodic_trim_for_ssds">Enable Periodic TRIM for SSDs</a></div></li>
<li class="level1"><div class="li"><a href="#enable_ipx_networking">Enable IPX Networking</a></div></li>
<li class="level1"><div class="li"><a href="#enable_debian_https_support_for_repositories">Enable Debian HTTPs Support for Repositories</a></div></li>
<li class="level1"><div class="li"><a href="#add_modules_to_initd">Add Modules to InitD</a></div></li>
<li class="level1"><div class="li"><a href="#regenerate_snakeoil_certificates">Regenerate Snakeoil Certificates</a></div></li>
<li class="level1"><div class="li"><a href="#ignoring_missing_library_information_when_compiling_packages">Ignoring Missing Library Information when Compiling Packages</a></div></li>
<li class="level1"><div class="li"><a href="#required_packages_for_intel_compiler">Required Packages for Intel Compiler</a></div></li>
<li class="level1"><div class="li"><a href="#reload_luks_encrypted_drives_without_restarting">Reload LUKS Encrypted Drives Without Restarting</a></div></li>
<li class="level1"><div class="li"><a href="#generate_md5_sums_for_package">Generate MD5 Sums for Package</a></div></li>
<li class="level1"><div class="li"><a href="#reinstall_package_and_all_dependencies">Reinstall Package and All Dependencies</a></div></li>
<li class="level1"><div class="li"><a href="#execute_java_program_under_different_jdk_version">Execute Java Program under Different JDK Version</a></div></li>
<li class="level1"><div class="li"><a href="#recompile_debian_kernel">Recompile Debian Kernel</a></div></li>
<li class="level1"><div class="li"><a href="#persisting_network_hardware_settings">Persisting Network Hardware Settings</a></div></li>
<li class="level1"><div class="li"><a href="#disable_nftables_and_continue_using_legacy_iptables">Disable nftables and Continue Using Legacy iptables</a></div></li>
<li class="level1"><div class="li"><a href="#fix_issues_on_release_change">Fix Issues on Release Change</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="determine_fastest_mirror">Determine Fastest Mirror</h1>
<div class="level1">

<p>
<code>netselect-apt</code> can do this:
</p>
<pre class="code bash">netselect-apt <span class="re5">-n</span> <span class="re5">-s</span></pre>

<p>
will benchmark Debian mirrors and generate <code>sources.list</code> containing the fastest stable mirror, including non-free packages and source packages. This file can then overwrite <code>/etc/apt/sources.list</code> to become the default source for Debian packages.
</p>

</div>

<h1 class="sectionedit2" id="extract_package">Extract Package</h1>
<div class="level1">

<p>
First use <code>ar</code>:
</p>
<pre class="code bash"><span class="kw2">ar</span> vx <span class="sy0">*</span>.deb</pre>

<p>
which will generate the following files:
</p>
<pre class="code">x - debian-binary
x - control.tar.gz
x - data.tar.lzma
</pre>

<p>
<code>lzma</code> may be <code>gz</code>, in which case, use <code>tar -xpvf data.tar.gz</code> to proceed further. Otherwise, in case it is compressed using <code>lzma</code>:
</p>
<pre class="code bash"><span class="kw2">tar</span> <span class="re5">--lzma</span> <span class="re5">-xpvf</span> file.tar.lama</pre>

</div>

<h1 class="sectionedit3" id="hold_package">Hold Package</h1>
<div class="level1">

<p>
Useful, for example, while manually recompiling a source package:
</p>
<pre class="code">aptitude [hold|unhold] package</pre>

<p>
in order to avoid it being overwritten by a binary package.
</p>

</div>

<h1 class="sectionedit4" id="recompile_kernel">Recompile Kernel</h1>
<div class="level1">

<p>
In order to do this the Debian way, download the source and configure the kernel. The current kernel source for the installed Debian distribution can be fetched with:
</p>
<pre class="code bash"><span class="kw2">aptitude install</span> linux-source kernel-package</pre>

<p>
along with <code>kernel-package</code> which gives us the tools to compile the kernel.
</p>

<p>
which will download the current kernel source and place it in <code>/usr/src/linux-source-*.tar.bz2</code> depending on the version of the kernel. The next step is to unarchive the source:
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>
<span class="kw2">tar</span> <span class="re5">-jxpvf</span> linux-source-<span class="sy0">*</span>.tar.bz2</pre>

<p>
To configure the kernel for compilation, first copy the current kernel configuration from <code>/boot/config-*</code> depending on the version of the kernel to <code>/usr/src/linux-source-*</code>. This will give you the basis from which to start:
</p>
<pre class="code bash"><span class="kw2">cp</span> <span class="sy0">/</span>boot<span class="sy0">/</span>config-<span class="sy0">*</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>linux-source-<span class="sy0">*/</span>.config</pre>

<p>
then we change the directory to <code>/usr/src/linux-source-*</code> and use <code>make menuconfig</code>:
</p>
<pre class="code bash"><span class="kw3">cd</span> <span class="sy0">/</span>usr<span class="sy0">/</span>src<span class="sy0">/</span>linux-source-<span class="sy0">*</span>
<span class="kw2">make</span> menuconfig</pre>

<p>
After configuring, we issue:
</p>
<pre class="code bash">make-kpkg <span class="re5">--initrd</span> kernel_image</pre>

<p>
which places the <code>deb</code> files in the immediately superior directory. To install the image, issue:
</p>
<pre class="code bash"><span class="kw3">cd</span> ..
<span class="kw2">dpkg</span> <span class="re5">-i</span> linux-image-2.6.32.Custom_amd64.deb</pre>

<p>
depending what version of the kernel has been compiled.
</p>

</div>

<h1 class="sectionedit5" id="determine_what_package_a_file_belongs_to">Determine What Package a File Belongs To</h1>
<div class="level1">

<p>
For example, to determine what Debian package <code>/etc/samba/smb.conf</code> belongs to, issue:
</p>
<pre class="code bash"><span class="kw2">dpkg</span> <span class="re5">-S</span> <span class="sy0">/</span>etc<span class="sy0">/</span>samba<span class="sy0">/</span>smb.conf</pre>

</div>

<h1 class="sectionedit6" id="cpan_modules_as_debian_packages">CPAN Modules as Debian Packages</h1>
<div class="level1">

<p>
First install <code>dh-make-perl</code> and update <code>apt-file</code>:
</p>
<pre class="code bash"><span class="kw2">aptitude install</span> dh-make-perl
<span class="kw2">apt-file update</span></pre>

<p>
Then install packages with:
</p>
<pre class="code bash">dh-make-perl <span class="re5">--build</span> <span class="re5">--cpan</span> Desired::CPAN::Module</pre>

</div>

<h1 class="sectionedit7" id="repair_filesystem_on_boot">Repair Filesystem on Boot</h1>
<div class="level1">

<p>
Filesystem repairs on boot can hang the machine if the filesystem was not cleanly unmounted. By editing <code>/etc/default/rcS</code> and setting:
</p>
<pre class="code"># automatically repair filesystems with inconsistencies during boot
FSCKFIX=yes
</pre>

<p>
will allow the server to automatically repair the filesystem on boot.
</p>

</div>

<h1 class="sectionedit8" id="install_packages_from_different_debian_release">Install Packages from Different Debian Release</h1>
<div class="level1">

<p>
In order to install packages from other releases, first add the repository to <code>/etc/apt/sources</code>:
</p>
<pre class="code">deb http://ftp.ua.debian.org/debian/debian/ squeeze main
deb-src http://ftp.ua.debian.org/debian/ squeeze main
</pre>

<p>
Then edit <code>/etc/apt/apt.conf</code> and set the default release to stable:
</p>
<pre class="code">APT::Default-release &quot;stable&quot;;
</pre>

<p>
Now, to install the package <code>libace-dev</code> from squeeze, the syntax is:
</p>
<pre class="code">aptitude install libace-dev/squeeze</pre>

</div>

<h1 class="sectionedit9" id="install_from_backports">Install From Backports</h1>
<div class="level1">

<p>
Backports are useful when you want a new package from the unstable branch. A good use for them is for example a newer kernel that supports features you may need. The procedure consists in:
</p>
<ul>
<li class="level1"><div class="li"> Editing <code>/etc/apt/sources.list</code> in order to add:</div>
</li>
</ul>
<pre class="code">deb http://MIRROR.debian.org/debian wheezy-backports main</pre>
<ul>
<li class="level1"><div class="li"> Running <code>aptitude update</code> to pick-up the changes.</div>
</li>
<li class="level1"><div class="li"> Finally, in order to install a package from backports, issue:</div>
</li>
</ul>
<pre class="code">aptitude -t wheezy-backports install linux-image-amd64</pre>

</div>

<h1 class="sectionedit10" id="boot_iso_with_grub">Boot ISO with Grub</h1>
<div class="level1">

<p>
<code>grub</code> can boot an <code>ISO</code> file using the <code>grml-rescueboot</code> package. First install the <code>grml-rescueboot</code> package:
</p>
<pre class="code bash"><span class="kw2">aptitude install</span> grml-rescueboot</pre>

<p>
and then place the <code>ISO</code> file in <code>/boot/grml/</code>:
</p>
<pre class="code bash"><span class="kw2">cp</span> rescue.iso <span class="sy0">/</span>boot<span class="sy0">/</span>grml</pre>

<p>
Finally update <code>grub</code> using the <code>update-grub</code> command:
</p>
<pre class="code bash">update-grub</pre>

<p>
Once the system restarts you will have a new option to boot from the <code>ISO</code> file.
</p>

</div>

<h1 class="sectionedit11" id="install_extra_netfilter_modules">Install Extra Netfilter Modules</h1>
<div class="level1">
<pre class="code bash"><span class="kw2">aptitude install</span> module-assistant xtables-addons-source
module-assistant prepare
module-assistant auto-install xtables-addons-source
<span class="kw2">depmod</span> <span class="re5">-a</span></pre>

</div>

<h1 class="sectionedit12" id="change_the_time_zone">Change the Time Zone</h1>
<div class="level1">

<p>
To change the time-zone, the Debian way, issue:
</p>
<pre class="code bash">dpkg-reconfigure tzdata</pre>

</div>

<h1 class="sectionedit13" id="list_all_packages_not_installed_automatically">List All Packages Not Installed Automatically</h1>
<div class="level1">

<p>
The following command will list all packages that were not installed automatically (for example, as a dependency of some other package):
</p>
<pre class="code bash"><span class="kw2">aptitude search</span> ~i <span class="sy0">|</span> <span class="kw2">grep</span> <span class="re5">-v</span> <span class="st0">&quot;i A&quot;</span> <span class="sy0">|</span> <span class="kw2">cut</span> <span class="re5">-d</span> <span class="st0">&quot; &quot;</span> <span class="re5">-f</span> <span class="nu0">4</span></pre>

</div>

<h1 class="sectionedit14" id="enable_periodic_trim_for_ssds">Enable Periodic TRIM for SSDs</h1>
<div class="level1">

<p>
As root, execute:
</p>
<pre class="code bash"><span class="kw2">cp</span> <span class="sy0">/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>doc<span class="sy0">/</span>util-linux<span class="sy0">/</span>examples<span class="sy0">/</span>fstrim.<span class="br0">&#123;</span>service,timer<span class="br0">&#125;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>systemd<span class="sy0">/</span>system
systemctl <span class="kw3">enable</span> fstrim.timer</pre>

<p>
which will schedule a TRIM operation on all SSDs every week.
</p>

</div>

<h1 class="sectionedit15" id="enable_ipx_networking">Enable IPX Networking</h1>
<div class="level1">

<p>
To enable IPX networking in Debian you should first follow the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/linux/debian/install_unstable_packages" class="wikilink1" title="linux:debian:install_unstable_packages" data-wiki-id="linux:debian:install_unstable_packages">tutorial on installing unstable packages</a> because the <code>ipx</code> package providing the <code>ipx_interface</code> command is (at the time of writing) available in the <code>oldstable</code> branch of Debian.
</p>

<p>
Next, to set-up the network, edit the configuration file <code>/etc/network/interfaces</code>. In that file you will find your LAN interface (either a bridge or an ethernet device), or the interface you want to enable IPX on. For example:
</p>
<pre class="code"># The primary network interface
auto br0
iface br0 inet static
        bridge_ports eth0
        bridge_stp off
        bridge_maxwait 0
        bridge_fd 0
        address 192.168.1.1
        broadcast 192.168.1.255
        netmask 255.255.255.0</pre>

<p>
After that you can add the IPX network:
</p>
<pre class="code">iface br0 ipx static
        frame 802.2
        netnum AABBCCDD</pre>

<p>
where <code>AABBCCDD</code> is the IPX network number represented in hex (excluding <code>00000000</code> and <code>FFFFFFFF</code> which are reserved).
</p>

<p>
An interesting idea would be to set the network number by transforming the TCP/IP address into hexadecimal, for example for <code>192.168.1.1</code> we would replace <code>AABBCCDD</code> with <code>C0A80101</code>.
</p>

</div>

<h1 class="sectionedit16" id="enable_debian_https_support_for_repositories">Enable Debian HTTPs Support for Repositories</h1>
<div class="level1">

<p>
In case you are trying to install packages from HTTPs repositories, you may encounter the error message:
</p>
<pre class="code">E: The method driver /usr/lib/apt/methods/https could not be found.</pre>

<p>
In order to resolve the issues, the following packages can be installed:
</p>
<pre class="code bash"><span class="kw2">aptitude install</span> apt-transport-https ca-certificates</pre>

<p>
such that Debian will accept package repositories that have to be fetched through HTTPs.
</p>

</div>

<h1 class="sectionedit17" id="add_modules_to_initd">Add Modules to InitD</h1>
<div class="level1">

<p>
To add modules to be loaded by initd, install <code>initramfs-tools</code>:
</p>
<pre class="code bash"><span class="kw2">aptitude install</span> initramfs-tools</pre>

<p>
and then edit <code>/etc/initramfs-tools/modules</code> and add the module name to the list.
</p>

<p>
Finally, issue:
</p>
<pre class="code bash">update-initramfs <span class="re5">-k</span> all <span class="re5">-u</span></pre>

<p>
to update the <code>initrd</code> image.
</p>

</div>

<h1 class="sectionedit18" id="regenerate_snakeoil_certificates">Regenerate Snakeoil Certificates</h1>
<div class="level1">

<p>
On Debian, the default snakeoil certificates at <code>/etc/ssl/certs/ssl-cert-snakeoil*</code> can be regenerated with the command:
</p>
<pre class="code bash">make-ssl-cert generate-default-snakeoil <span class="re5">--force-overwrite</span></pre>

</div>

<h1 class="sectionedit19" id="ignoring_missing_library_information_when_compiling_packages">Ignoring Missing Library Information when Compiling Packages</h1>
<div class="level1">

<p>
When compiling packages on Debian that use libraries that are not managed by the Debian package system the following error may appear at the end of the build process: <code>dpkg-shlibdeps: error: no dependency information found</code> followed by the library you are compiling against.
</p>

<p>
In order to ignore missing library information, add the following snippet:
</p>
<pre class="code">override_dh_shlibdeps:
    dh_shlibdeps --dpkg-shlibdeps-params=--ignore-missing-info</pre>

<p>
to <code>rules/debian</code>.
</p>

<p>
Note that the spaces before <code>dh_shlibdeps</code> is actually a tab!
</p>

<p>
Additionally, you can issue:
</p>
<pre class="code bash"><span class="kw3">export</span> <span class="re2">DEB_DH_SHLIBDEPS_ARGS_ALL</span>=--dpkg-shlibdeps-params=--ignore-missing-info</pre>

<p>
before compiling.
</p>

</div>

<h1 class="sectionedit20" id="required_packages_for_intel_compiler">Required Packages for Intel Compiler</h1>
<div class="level1">

<p>
If you want to install the Intel Compiler (icc) on Debian, the 32-bit version libraries are required. To install them, issue:
</p>
<pre class="code bash"><span class="kw2">dpkg</span> <span class="re5">--add-architecture</span> i386
<span class="kw2">aptitude update</span>
<span class="kw2">aptitude install</span> gcc-multilib libstdc++<span class="nu0">6</span>:i386 libgcc1:i386</pre>

</div>

<h1 class="sectionedit21" id="reload_luks_encrypted_drives_without_restarting">Reload LUKS Encrypted Drives Without Restarting</h1>
<div class="level1">

<p>
After editing <code>/etc/crypttab</code>, issue:
</p>
<pre class="code bash">systemctl daemon-reload
systemctl restart cryptsetup.target</pre>

<p>
followed by:
</p>
<pre class="code bash"><span class="kw2">mount</span> <span class="re5">-a</span></pre>

<p>
to remount all encrypted drives.
</p>

</div>

<h1 class="sectionedit22" id="generate_md5_sums_for_package">Generate MD5 Sums for Package</h1>
<div class="level1">

<p>
The following line, when executed inside a package directory tree, will generate the <code>DEBIAN/md5sums</code> file.
</p>
<pre class="code bash">md5sum $<span class="br0">&#40;</span><span class="kw2">find</span> <span class="sy0">*</span> <span class="re5">-type</span> f <span class="re5">-not</span> <span class="re5">-path</span> <span class="st_h">'DEBIAN/*'</span><span class="br0">&#41;</span> <span class="sy0">&gt;</span>DEBIAN<span class="sy0">/</span>md5sums</pre>

</div>

<h1 class="sectionedit23" id="reinstall_package_and_all_dependencies">Reinstall Package and All Dependencies</h1>
<div class="level1">

<p>
The following command will reinstall a package along with all its dependencies and additionally create any new configuration files:
</p>
<pre class="code bash"><span class="kw2">apt-cache depends</span> PACKAGE <span class="sy0">|</span> <span class="kw2">grep</span> <span class="st_h">'[ |]Depends: [^&lt;]'</span> <span class="sy0">|</span> <span class="kw2">cut</span> -d: <span class="re5">-f2</span> <span class="sy0">|</span> <span class="kw2">tr</span> <span class="re5">-d</span> <span class="st_h">' '</span> <span class="sy0">|</span> <span class="kw2">xargs</span> apt <span class="kw2">install</span> <span class="re5">--reinstall</span>  <span class="re5">-o</span> Dpkg::Options::=<span class="st0">&quot;--force-confask,confnew,confmiss&quot;</span> <span class="re5">-y</span></pre>

<p>
where:
</p>
<ul>
<li class="level1"><div class="li"> <code>PACKAGE</code> is a debian package.</div>
</li>
</ul>

</div>

<h1 class="sectionedit24" id="execute_java_program_under_different_jdk_version">Execute Java Program under Different JDK Version</h1>
<div class="level1">

<p>
Execute the command:
</p>
<pre class="code bash">update-java-alternatives <span class="re5">-l</span></pre>

<p>
to list the available JDKs.
</p>

<p>
Issue:
</p>
<pre class="code bash">update-java-alternatives <span class="re5">-s</span> java-1.8.0-openjdk-amd64</pre>

<p>
where:
</p>
<ul>
<li class="level1"><div class="li"> <code>java-1.8.0-openjdk-amd64</code> - is the java JDK obtained from the previous command.</div>
</li>
</ul>

<p>
to set the java JDK version to be used.
</p>

</div>

<h1 class="sectionedit25" id="recompile_debian_kernel">Recompile Debian Kernel</h1>
<div class="level1">

<p>
<a href="https://www.circuidipity.com/kernel/" class="urlextern" title="https://www.circuidipity.com/kernel/" rel="ugc nofollow">Summarizing</a>, either use apt to fetch the source code, ie:
</p>
<pre class="code bash"><span class="kw2">apt-get <span class="kw3">source</span></span> linux-image-4.19.0-<span class="nu0">8</span>-amd64</pre>

<p>
or download the kernel source code manually from <a href="http://kernel.org" class="urlextern" title="http://kernel.org" rel="ugc nofollow">http://kernel.org</a>.
</p>

<p>
Since Debian does not define the kernel compilation parameter to include the current kernel configuration in memory under <code>/proc/config.gz</code> but stores the configuration under <code>/boot</code>, the configuration can be copied into the current kernel source directory:
</p>
<pre class="code bash"><span class="kw2">cp</span> <span class="sy0">/</span>boot<span class="sy0">/</span>config-4.19.0-<span class="nu0">8</span>-amd64 .config</pre>

<p>
In case a different kernel version is to be compiled compared to the current kernel configuration, the following command:
</p>
<pre class="code bash"><span class="kw2">make</span> olddefconfig</pre>

<p>
should accept the default for the current kernel version.
</p>

<p>
If compiling under Debian, the current configuration <code>.config</code> has to be edited and <code>CONFIG_SYSTEM_TRUSTED_KEYS</code> set to the empty string:
</p>
<pre class="code">CONFIG_SYSTEM_TRUSTED_KEYS=&quot;&quot;</pre>

<p>
in order to avoid a compilation error:
</p>
<pre class="code">No rule to make target &#039;debian/certs/debian-uefi-certs.pem&#039;, needed by &#039;certs/x509_certificate_list&#039;.  Stop.</pre>

<p>
Additionally, since Debian builds the debug packages of the kernel by default which takes a long while and uses up a lot of disk resources, the kernel configuration in <code>.config</code> can be edit and the parameter <code>CONFIG_DEBUG_INFO</code> adjusted to <code>n</code> to skip building the debug packages:
</p>
<pre class="code bash"><span class="re2">CONFIG_DEBUG_INFO</span>=n</pre>

<p>
The usual pair of commands, either <code>nconfig</code>:
</p>
<pre class="code bash"><span class="kw2">make</span> nconfig</pre>

<p>
or <code>makeconfig</code> can be issued in order to make any changes to the copied configuration:
</p>
<pre class="code bash"><span class="kw2">make</span> menuconfig</pre>

<p>
Finally, issue:
</p>
<pre class="code bash"><span class="kw2">make</span> deb-pkg <span class="re2">LOCALVERSION</span>=-custom</pre>

<p>
where:
</p>
<ul>
<li class="level1"><div class="li"> <code>-custom</code> is a build name appended to the kernel package that will be built.</div>
</li>
</ul>

</div>

<h1 class="sectionedit26" id="persisting_network_hardware_settings">Persisting Network Hardware Settings</h1>
<div class="level1">

<p>
When installing <code>ethtool</code> on Debian, a script is placed at <code>/etc/network/if-up.d/ethtool</code> that, once an interface is brought up, runs through all the settings for all interfaces and makes changes to the hardware driver via <code>ethtool</code>.
</p>

<p>
The proper way to persist settings in Debian, for instance, to enable checksum offloading, is to make the settings in the interfaces file but without using an <code>up</code> or <code>post-up</code> script.
</p>

<p>
For instance, the following settings will bring up the interface <code>eth0</code> via DHCP and then enable TSO on the interface:
</p>
<pre class="code">auto eth0
iface eth0 inet dhcp
    offload-tx on
    offload-sg on
    offload-tso on</pre>

</div>

<h1 class="sectionedit27" id="disable_nftables_and_continue_using_legacy_iptables">Disable nftables and Continue Using Legacy iptables</h1>
<div class="level1">
<pre class="code bash">update-alternatives <span class="re5">--set</span> iptables <span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>iptables-legacy
update-alternatives <span class="re5">--set</span> ip6tables <span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ip6tables-legacy
update-alternatives <span class="re5">--set</span> arptables <span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>arptables-legacy
update-alternatives <span class="re5">--set</span> ebtables <span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>ebtables-legacy</pre>

</div>

<h1 class="sectionedit28" id="fix_issues_on_release_change">Fix Issues on Release Change</h1>
<div class="level1">

<p>
When a repository changes its release data the following error should appear when updating packages:
</p>
<pre class="code">This must be accepted explicitly before updates for this repository can be applied. See apt-secure(8) manpage for details</pre>

<p>
the solution is to run <code>apt</code> as:
</p>
<pre class="code bash"><span class="kw2">apt-get update</span> <span class="re5">--allow-releaseinfo-change</span></pre>

<p>
with the extra <code>--allow-releaseinfo-change</code>.
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <div class="docInfo"><bdi>fuss/debian.txt</bdi> · Last modified: 2022/04/19 09:28 (external edit)</div>

            <!-- PAGE ACTIONS -->
            <!-- <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Revisions [O]"><span>Revisions</span></a></li><li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian?do=export_pdf"  class="action export_pdf" rel="nofollow" title="Export to PDF"><span>Export to PDF</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div>--><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer">
    <!-- <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div> -->

		<!-- BREADCRUMBS -->
					<div class="breadcrumbs">
									<div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss" class="wikilink1" title="fuss" data-wiki-id="fuss">fuss</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian" class="wikilink1" title="fuss:debian" data-wiki-id="fuss:debian">debian</a></bdi></div>
											</div>
		
		<!-- ********** BOTTOM BAR ********** -->
		<div class="bar" id="bar__bottom">
		  <div class="bar-left" id="bar__bottomleft">
			<form class="button btn_login" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian"><div class="no"><input type="hidden" name="do" value="login" /><input type="hidden" name="sectok" value="" /><button type="submit" title="Log In">Log In</button></div></form>						<form class="button btn_revs" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian"><div class="no"><input type="hidden" name="do" value="revisions" /><button type="submit" accesskey="o" title="Revisions [O]">Revisions</button></div></form>			                        <form class="button btn_pdf" action="?do=export_pdf" method="POST">
                            <button type="submit" title="PDF">PDF</button>
                        </form>
		  </div>
		  <div class="bar-center">
                        <form class="button btn_home" action="/" method="POST">
                            <button type="submit" title="Home">Home</button>
                        </form>
			<form action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="fuss:debian" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>			<!-- <form id="osssearchform" method="get" action="renderer">
        <input type="hidden" name="use" value="grimore.org">
        <input type="hidden" name="name" value="default">
        <input type="text" id="osssearchbox" name="query">
        <input type="hidden" name="login" value="search">
        <input type="hidden" name="key" value="1a5f74ab3f4df6ce883c4c158540e25e">
        <input type="submit" value="Search">
</form>
 -->
		  </div>
		  <div class="bar-right" id="bar__bottomright">
                        <form class="button btn_contact" action="mailto:%6F%66%66%69%63%65%40%67%72%69%6D%6F%72%65%2E%6F%72%67" method="POST">
                            <button type="submit" title="Contact">Contact</button>
                        </form>
                        <form class="button btn_news" action="/feed.php?mode=recent&amp;type=rss" method="POST">
                            <button type="submit" title="News">News</button>
                        </form>
			<form class="button btn_admin" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/debian"><div class="no"><input type="hidden" name="do" value="admin" /><button type="submit" title="Admin">Admin</button></div></form>								  </div>
		  		</div>

		
</div><!-- /footer -->

<div style="text-align: center;">
    <div style="display:inline-block;">
      <p>
        <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion">
          <img src="/lib/tpl/was/images/button-tor.png" alt="Access website using Tor" />
        </a> 
        <a href="http://ioujrf2uwqairs7l3vyvqp7n2pia3x3wg5w5qtcqvg32zezuezza.b32.i2p/" />
          <img src="/lib/tpl/was/images/button-i2p.png" alt="Access website using i2p" />
        </a>
        <a href="http://pgp.grimore.org/" />
          <img src="/lib/tpl/was/images/button-pgp.png" alt="Wizardry and Steamworks PGP Key" />
        </a>
      </p>
    </div>
<!--    <div style="display:inline-block;">
      <p>
        <a href="http://ij4lpzuyyng6cc4jw5mxibcyjv4rx4uk6x5jijoduglkgjh7mmya.b32.i2p">
          <img src="/lib/tpl/was/images/button-i2p.png" alt="Access website using i2p" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="http://cydia.grimore.org/">
          <img src="/lib/tpl/was/images/button-cydia.png" alt="Wizardry and Steamworks Cydia Repository" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="http://debian.grimore.org/">
          <img src="/lib/tpl/was/images/button-debian.png" alt="Wizardry and Steamworks Debian Repository" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="/opt/pasteboard/" rel="external nofollow">
          <img src="/lib/tpl/was/images/button-live.png" alt="Live Pasteboard" />
        </a> 
      </p>
    </div> -->
    
<br/>

    <p>
      For the copyright, license, warranty and privacy terms for the usage of this website please see the <a
      href="/wiki:license">license</a>, <a href="/wiki:privacy">privacy</a>, <a
      href="/wiki:copyright">copyright</a>
      and the <a href="/wiki:plagiarism">plagiarism</a> pages.
    </p>
</div>
    </div></div><!-- /site -->

    <div class="no"><img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/taskrunner.php?id=fuss%3Adebian&amp;1657304712" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if lte IE 8 ]></div><![endif]-->
</body>
</html>
