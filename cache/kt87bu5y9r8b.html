<!DOCTYPE html>
<html lang="was" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>opensim:clockwerk [Wizardry and Steamworks]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="opensim,clockwerk"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/opensearch.php" title="Wizardry and Steamworks"/>
<link rel="start" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/"/>
<link rel="contents" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk?do=index" title="Sitemap"/>
<link rel="manifest" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Changes" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/feed.php?mode=list&amp;ns=opensim"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_export/xhtml/opensim/clockwerk"/>
<link rel="canonical" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk"/>
<link rel="stylesheet" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/css.php?t=was&amp;tseed=24551d22639bdaeb736aec3dca86fd82"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='opensim';var JSINFO = {"plugin_imagemap_mldummy":"http:\/\/3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion\/_media\/wiki\/dokuwiki-128.png","isadmin":0,"isauth":0,"plugin_pdfjs":{"hide_download_button":0},"plugins":{"vshare":{"youtube":"youtube\\.com\/.*[&?]v=([a-z0-9_\\-]+)","vimeo":"vimeo\\.com\\\/(\\d+)","slideshare":"slideshare.*id=(\\d+)","dailymotion":"dailymotion\\.com\/video\/([a-z0-9]+)","archiveorg":"archive\\.org\/(?:embed|details)\/([a-zA-Z0-9_\\-]+)","soundcloud":"soundcloud\\.com\/([\\w-]+\/[\\w-]+)","niconico":"nicovideo\\.jp\/watch\/(sm[0-9]+)","bitchute":"bitchute\\.com\\\/video\\\/([a-zA-Z0-9_\\-]+)","coub":"coub\\.com\\\/view\\\/([a-zA-Z0-9_\\-]+)","odysee":"odysee\\.com\/\\$\/(?:embed|download)\/([-%_?=\/a-zA-Z0-9]+)","youku":"v\\.youku\\.com\/v_show\/id_([0-9A-Za-z=]+)\\.html","bilibili":"bilibili\\.com\\\/video\\\/(BV[0-9A-Za-z]+)","msoffice":"(?:office\\.com.*[&?]videoid=([a-z0-9\\-]+))","msstream":"microsoftstream\\.com\\\/video\\\/([a-f0-9\\-]{36})"}},"id":"opensim:clockwerk","namespace":"opensim","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script charset="utf-8" src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/jquery.php?tseed=34a552433bc33cc9c3bc32527289a0b2"></script>
<script charset="utf-8" src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/js.php?t=was&amp;tseed=24551d22639bdaeb736aec3dca86fd82&amp;template=was"></script>
<!--<![endif]-->
    <!-- <link rel="shortcut icon" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/favicon.ico" />
<link rel="apple-touch-icon" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/apple-touch-icon.png" />
 -->
    <!-- Viewport -->
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!-- Favicon -->
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png?v=2">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png?v=2">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png?v=2">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png?v=2">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png?v=2">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png?v=2">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png?v=2">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png?v=2">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png?v=2">
<link rel="icon" type="image/png" href="/favicon-32x32.png?v=2" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png?v=2" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png?v=2" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png?v=2" sizes="16x16">
<link rel="manifest" href="/manifest.json?v=2">
<link rel="shortcut icon" href="/favicon.ico?v=2">
<meta name="apple-mobile-web-app-title" content="[Wizardry and Steamworks]">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png?v=2">
<meta name="application-name" content="[Wizardry and Steamworks]">
<meta name="theme-color" content="#ffffff">
    <!-- <script async type="text/javascript" src="/lib/tpl/was/loadCSS.js"></script>
    <script async type="text/javascript" src="/lib/tpl/was/cssrelpreload.js"></script> -->
</head>

<body>
    <!--[if lte IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_was     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header">

	    
	<!-- ********** TOP BAR ********** -->
	<div class="bar" id="bar__top">
		<div class="bar-left" id="bar__topleft">
			<form class="button btn_login" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk"><div class="no"><input type="hidden" name="do" value="login" /><input type="hidden" name="sectok" value="" /><button type="submit" title="Log In">Log In</button></div></form>						<form class="button btn_revs" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk"><div class="no"><input type="hidden" name="do" value="revisions" /><button type="submit" accesskey="o" title="Revisions [O]">Revisions</button></div></form>						<form class="button btn_pdf" action="?do=export_pdf" method="POST">
			    <button type="submit" title="PDF">PDF</button>
                        </form>
		</div>
		<div class="bar-center">
		        <form class="button btn_home" action="/" method="POST">
                            <button type="submit" title="Home">Home</button>
                        </form>
			<form action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="opensim:clockwerk" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>			<!-- <form id="osssearchform" method="get" action="renderer">
        <input type="hidden" name="use" value="grimore.org">
        <input type="hidden" name="name" value="default">
        <input type="text" id="osssearchbox" name="query">
        <input type="hidden" name="login" value="search">
        <input type="hidden" name="key" value="1a5f74ab3f4df6ce883c4c158540e25e">
        <input type="submit" value="Search">
</form>
 -->
		</div>
		<div class="bar-right" id="bar__topright">
		        <form class="button btn_contact" action="mailto:%6F%66%66%69%63%65%40%67%72%69%6D%6F%72%65%2E%6F%72%67" method="POST">
			    <button type="submit" title="Contact">Contact</button>
                        </form>
                        <form class="button btn_news" action="/feed.php?type=rss2&amp;ns=opensim:clockwerk&amp;linkto=page&amp;content=abstract" method="POST">
			    <button type="submit" title="News">News</button>
                        </form>
			<form class="button btn_admin" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk"><div class="no"><input type="hidden" name="do" value="admin" /><button type="submit" title="Admin">Admin</button></div></form>								</div>
			</div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim" class="wikilink1" title="opensim" data-wiki-id="opensim">opensim</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk" class="wikilink1" title="opensim:clockwerk" data-wiki-id="opensim:clockwerk">clockwerk</a></bdi></div>
                                </div>
    
    <hr class="a11y" />
</div><!-- /header -->

        <div class="wrapper group">

            <!--  -->

            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <!-- <div class="pageId"><span>opensim:clockwerk</span></div> -->

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#changelog">ChangeLog</a></div></li>
<li class="level1"><div class="li"><a href="#about">About</a></div></li>
<li class="level1"><div class="li"><a href="#video_demonstration">Video Demonstration</a></div></li>
<li class="level1"><div class="li"><a href="#downloads">Downloads</a></div></li>
<li class="level1"><div class="li"><a href="#converting_the_hard-drive_image">Converting the Hard-Drive Image</a></div></li>
<li class="level1"><div class="li"><a href="#access_to_development_projects">Access to Development Projects</a></div></li>
<li class="level1"><div class="li"><a href="#design">Design</a></div></li>
<li class="level1"><div class="li"><a href="#opensim">OpenSim</a></div></li>
<li class="level1"><div class="li"><a href="#opensim_scripting_language_acls">OpenSim Scripting Language ACLs</a></div></li>
<li class="level1"><div class="li"><a href="#web_management_features">Web Management Features</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#opensim_console_access">OpenSim Console Access</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#virtual_machine">Virtual Machine</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#optimizations">Optimizations</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#kernel-level_tweaks">Kernel-level Tweaks</a></div></li>
<li class="level3"><div class="li"><a href="#sysctl_tweaks">Sysctl Tweaks</a></div></li>
<li class="level3"><div class="li"><a href="#filesytem_tweaks">Filesytem Tweaks</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#hardware_requirements">Hardware Requirements</a></div></li>
<li class="level2"><div class="li"><a href="#passwords_and_accounts">Passwords and Accounts</a></div></li>
<li class="level2"><div class="li"><a href="#bundled_running_software_daemons">Bundled Running Software Daemons</a></div></li>
<li class="level2"><div class="li"><a href="#filesystem_structure">Filesystem Structure</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#upgrade_and_reset">upgrade and reset</a></div></li>
<li class="level3"><div class="li"><a href="#assetcleaner">assetcleaner</a></div></li>
<li class="level3"><div class="li"><a href="#iardumper">iardumper</a></div></li>
<li class="level3"><div class="li"><a href="#osstrap">osstrap</a></div></li>
<li class="level3"><div class="li"><a href="#firewall">firewall</a></div></li>
<li class="level3"><div class="li"><a href="#fix_file_permissions">fix_file_permissions</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#making_local_configuration_changes">Making Local Configuration Changes</a></div></li>
<li class="level1"><div class="li"><a href="#upgrading_clockwerk">Upgrading Clockwerk</a></div></li>
<li class="level1"><div class="li"><a href="#deploying_clockwerk">Deploying Clockwerk</a></div></li>
<li class="level1"><div class="li"><a href="#contrast_to_other_projects">Contrast to Other Projects</a></div></li>
<li class="level1"><div class="li"><a href="#copyright">Copyright</a></div></li>
<li class="level1"><div class="li"><a href="#index">Index</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="changelog">ChangeLog</h1>
<div class="level1">
<div class="wrap_changelog plugin_wrap">
<p>
<strong>25 September 2014</strong>
</p>
<ul>
<li class="level1"><div class="li"> Updated OpenSim to 0.8.</div>
</li>
</ul>

<p>
<strong>4 May 2014</strong>
</p>
<ul>
<li class="level1"><div class="li"> Updated website files to be compliant to standards.</div>
</li>
<li class="level1"><div class="li"> Fixed error messages for IAR and OAR downloads.</div>
</li>
</ul>

<p>
<strong>27 April 2014</strong>
</p>
<ul>
<li class="level1"><div class="li"> Clockwerk synced with OpenSim git, pulled upgrades and downloadable images are now indexed by date.</div>
</li>
</ul>

<p>
<strong>5 April 2014</strong>
</p>
<ul>
<li class="level1"><div class="li"> Clockwerk now supports accessing the OpenSim console from the viewer or from the management webpage. This requires a fresh copy of the Clockwerk image to be downloaded. For more details on accessing the console from Clockwerk&#039;s management interface, please see <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk#opensim_console_access" class="wikilink1" title="opensim:clockwerk" data-wiki-id="opensim:clockwerk">OpenSim Console Access</a>.</div>
</li>
</ul>

<p>
<strong>1 April 2014</strong>
</p>
<ul>
<li class="level1"><div class="li"> Fixed IAR uploads (missing parameter from RAdmin).</div>
</li>
<li class="level1"><div class="li"> Changes to Clockwerk website code.</div>
</li>
</ul>

<p>
<strong>1 March 2014</strong>
</p>
<ul>
<li class="level1"><div class="li"> Release of Clockwerk.</div>
</li>
<li class="level1"><div class="li"> Merged partitions and used the <code>jfs</code> filesystem.</div>
</li>
<li class="level1"><div class="li"> Added <code>clockwerk-upgrade</code>, <code>clockwerk-reset</code> and <code>clockwerk-configure</code> commands that can be issued from login without changing directories.</div>
</li>
<li class="level1"><div class="li"> Moved <code>opensim</code> to <code>/srv/opensim</code>.</div>
</li>
<li class="level1"><div class="li"> Moved the tools to <code>/srv/clockwerk</code>.</div>
</li>
<li class="level1"><div class="li"> Changed logo.</div>
</li>
</ul>
</div>
</div>

<h1 class="sectionedit4" id="about">About</h1>
<div class="level1">

<p>
Clockwerk is the next generation of a self-contained Virtual Machine created and maintained by the Wizardry and Steamworks group that is configured and optimised to run a standalone hypergrid instance of OpenSim. OpenSim is not scalable when it comes to providing services to a large number of users. For example, when running a single instance of OpenSim and providing services to multiple users by allocating regions for them, the resource consumption seems to have a quadratic progression, where more and more resources are consumed, even for the slightest functionality of OpenSim. As an example of poor design is the fact that, by default, assets (images, audio clips, etc...) are never purged from the users&#039; inventory, even if the users trash them and purge them in-world.
</p>

<p>
In order to avoid that, we have been designing virtual boxes that are supposed to make the resource consumption issue manageable by allowing administrators to allocate processors to each individual box. Furthermore, since the requirements state that languages such as <code>C#</code> have to be used within the Owls, and because OpenSim provides full-access to the filesystem allowing for simple path-traversal issues, we have found it unwise to run an OpenSim daemon on a multi-user machine (unless OpenSim would be <code>chroot</code>ed).
</p>

</div>

<h1 class="sectionedit5" id="video_demonstration">Video Demonstration</h1>
<div class="level1">

<p>
<video class="media" width="800" height="480" controls="controls">
<source src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/video/opensim_clockwerk_showcase.mp4" type="video/mp4" />
<a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/video/opensim_clockwerk_showcase.mp4?cache=" class="media mediafile mf_mp4" title="video:opensim_clockwerk_showcase.mp4 (8 MB)">opensim_clockwerk_showcase.mp4</a></video>

</p>

</div>

<h1 class="sectionedit6" id="downloads">Downloads</h1>
<div class="level1">

<p>
Downloads are provided for <code>qemu</code>, <code>Virtual Box</code> and <code>VMWare</code>.
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://files.grimore.org/Clockwerk/" class="urlextern" title="http://files.grimore.org/Clockwerk/" rel="ugc nofollow">Clockwerk</a></div>
</li>
</ul>

</div>

<h1 class="sectionedit7" id="converting_the_hard-drive_image">Converting the Hard-Drive Image</h1>
<div class="level1">

<p>
Should you need to convert the image files, this can be achieved with with the <code>qemu-img</code> tool.
</p>

</div>

<h5 id="to_vmware">To VMWare</h5>
<div class="level5">
<pre class="code bash">qemu-img convert <span class="re5">-O</span> vmdk <span class="st0">&quot;Clockwerk.qcow2&quot;</span> <span class="st0">&quot;Clockwerk.vmdk&quot;</span></pre>

</div>

<h5 id="to_virtual_box">To Virtual Box</h5>
<div class="level5">
<pre class="code bash">qemu-img convert <span class="re5">-O</span> vdi <span class="st0">&quot;Clockwerk.qcow2&quot;</span> <span class="st0">&quot;Clockwerk.vdi&quot;</span></pre>

</div>

<h1 class="sectionedit8" id="access_to_development_projects">Access to Development Projects</h1>
<div class="level1">

<p>
All the code that we write and use is modular and available publicly under various OpenSource licenses from the follwing repositories:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://svn.grimore.org/clockwerk-opensim-config" class="urlextern" title="http://svn.grimore.org/clockwerk-opensim-config" rel="ugc nofollow">clockwerk-opensim-config</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://svn.grimore.org/clockwerk-opensim" class="urlextern" title="http://svn.grimore.org/clockwerk-opensim" rel="ugc nofollow">clockwerk-opensim</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://svn.grimore.org/clockwerk-www" class="urlextern" title="http://svn.grimore.org/clockwerk-www" rel="ugc nofollow">clockwerk-www</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://svn.grimore.org/clockwerk-tools" class="urlextern" title="http://svn.grimore.org/clockwerk-tools" rel="ugc nofollow">clockwerk-tools</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://svn.grimore.org/clockwerk-guacamole" class="urlextern" title="http://svn.grimore.org/clockwerk-guacamole" rel="ugc nofollow">clockwerk-guacamole</a></div>
</li>
</ul>

</div>

<h1 class="sectionedit9" id="design">Design</h1>
<div class="level1">

<p>
Our Owls to provide a scalable service to educators that teach natural sciences and provide governmental training. Due to the heterogeneous environment, where users with different backgrounds (for example, a physics lecturer and a chemistry lecturer) are meant to be able to access and use their grids asynchronously for teaching, an OpenSim architecture based on grid-wide services becomes unfeasible and even less desirable. That it mainly because of the load exerted onto the system when multiple users access the services (ie: Linden Labs have never fixed their group chat issue due to the fact that their grid-wide services receive so many asynchronous messages that Jabber bails out and is unable to process further requests).
</p>

<p>
We have a star-shaped topology where each grid is self-standing and, due to the hypergrid architecture of OpenSim, avatars are able to &quot;hyperjump&quot; from grid to grid while still maintaining most of the Virtual World functionality. There are certain limitations, such as the infamous &quot;Suitcase&quot; problem when an avatar hyperjumps to a different grid but they are being addressed. Thus, each of the grids can be accessed individually by creating an account local to the grid or by creating an account on the greeting grid and hyper-jumping to the other grids.
</p>

<p>
<img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/opensim/clockwerk?ditaa=57496148b7d7b4a1d5331b326063f33f&amp;t=1656282717" class="media" alt=""/>
</p>

<p>
This topology scales well, given that educators do not want to be bothered by incoming travellers during lectures and that various activities may crash a grid. In that sense, we do not have a single point of failure. If one of the grids becomes compromised, then the rest of the grids will most-likely be up and running. The star-shaped topology also allows the distribution of grids across multiple machines, most of the work being done by a DNS server - it is not imperative that all the grids have to be hosted on the same machine, nor be placed in the same location.
</p>

</div>

<h1 class="sectionedit10" id="opensim">OpenSim</h1>
<div class="level1">

<p>
Clockwerk is synchronized with the OpenSim development branch and includes a series of patches that have not been included in the mainstream OpenSim:
</p>
<ul>
<li class="level1"><div class="li"> The <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/server_patches/disable_iar_passwords" class="wikilink1" title="opensim:server_patches:disable_iar_passwords" data-wiki-id="opensim:server_patches:disable_iar_passwords">disable IAR passwords patch</a> which is conceptually flawed, given that such a patch has to be applied to Robust instead of the OpenSim core. This means that the Spectacled Owl is not suitable to be used in a grid-like environment. Nevertheless, we accept this patch because the Spectacled Owl is designed and tuned to run as a standalone hypergrid.</div>
</li>
<li class="level1"><div class="li"> Clockwerk uses BulletSim physics instead of ODE. This results in a better performance when it comes to physical simulations and will most likely be used for simulators such as the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/secondlife/population_genetics_and_selection" class="wikilink1" title="secondlife:population_genetics_and_selection" data-wiki-id="secondlife:population_genetics_and_selection">Population Genetics and Selection (PGS)</a> project.</div>
</li>
<li class="level1"><div class="li"> <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/suspend_and_resume" class="wikilink1" title="opensim:suspend_and_resume" data-wiki-id="opensim:suspend_and_resume">Suspend and Resume</a> is used to freeze OpenSim in case no avatars are present on the grid. This reduces the CPU load considerably and allows you to run many Owls in parallel. On the other hand, if computational simulations are meant to be run on the Spectacled Owl, you can remove <code>/etc/cron.minutely/opensimpm</code> and the Spectacled Owl will run without suspending. The suspend time is controlled by the firewall (see filesystem tree below), setting <code>IDLETIMER</code> to <code>600</code> (10 minutes) per default.</div>
</li>
<li class="level1"><div class="li"> <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/server_patches/use_timers_for_lsl_events" class="wikilink1" title="opensim:server_patches:use_timers_for_lsl_events" data-wiki-id="opensim:server_patches:use_timers_for_lsl_events">Time-dependent event handlers</a> are patched such that LSL scripts that use <code>listen</code>, <code>sensors</code>, <code>dataserver</code> and <code>timer</code> will have a timing of <img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/fetch.php?media=wiki:latex:/imgb4399a8d0fb5d7284063ba4cd6e6523e.png" class="latex_inline" alt="$\approx 0.05s$" title="Math" /> which is equivalent to the timing in SecondLife.</div>
</li>
</ul>

</div>

<h1 class="sectionedit11" id="opensim_scripting_language_acls">OpenSim Scripting Language ACLs</h1>
<div class="level1">

<p>
Clockwerk is OSSL friendly and all functions can be used on a simple ACL scheme devised by Wizardry and Steamworks. Contrary to the main development branch of OpenSim, Clockwerk disregards the &quot;threat level&quot; setting because it is ambiguous. 
</p>

<p>
A good example of ambiguity or poor design is the <code>osNpcStand</code> function that makes an NPC stand. It is classed as a <code>High</code> threat function, which per OpenSim OSSL standards allows for:
</p>

<p>
<em>&quot;Casual abuse can cause impaired functionality or temporary denial of service conditions. Intentional abuse can easily cause crashes with potential data loss, or can be used to trick experienced and cautious users into unwanted situations, or changes global data permanently and without undo ability.&quot;</em> -  <a href="http://opensimulator.org/wiki/Threat_level" class="urlextern" title="http://opensimulator.org/wiki/Threat_level" rel="ugc nofollow">OpenSim wiki, Threat Level</a>
</p>

<p>
If making an NPC stand can cause all that, then that is very bad (no other way to express it). Cases such as DoS or access to global data should be handled by the developer of the <code>osNpcStand</code> function and not left in the air and the liability dumped onto the user. <code>osNpcStand</code> is just an example, out of many, that has absolutely no reason to cause any of the damage cited in the last passage.
</p>

<p>
Instead, Clockwerk imposes restrictions on each function individually, thereby strengthening the definition of OSSL security. All the OSSL functions are thus defined in <code>OpenSim.ini</code> and prefixed with <code>Allow_</code>.
</p>

<p>
Under most applications, many of these function&#039;s <em>specified behavior</em> should not be harmful to neither security nor privacy. Such functions are set to <code>true</code>, thereby allowing everybody access to them. As an example, Clockwerk by default grants full access to the prim-drawing OSSL functions, or the OSSL functions that gets a key from an avatar name. Under the assumption that they do not include bugs from upstream developers and that they conform to the documentation, they could not be used in a malicious manner.
</p>

<p>
Other functions that may leak some information, are set to <code>PARCEL_GROUP_MEMBER</code> meaning that they will only work if the land that a group is set to is the same as the group that the object is set to. If these two match, regardless of the owner of the object, all functions tagged with <code>PARCEL_GROUP_MEMBER</code> will work. For example, all the NPC-related OSSL functions are by default to <code>PARCEL_GROUP_MEMBER</code>.
</p>

<p>
Some functions such as the OSSL functions that handle parcel division and joining are set to <code>PARCEL_OWNER</code> meaning that the object has to be set to the parcel owner.
</p>

<p>
<code>ESTATE_OWNER</code> is a setting that indicates that the owner of the object using the OSSL function has to be the estate manager. This is the case for the region settings such as the estate sun settings, wind settings and even the OSSL function to get an agent&#039;s IP. Note that Clockwerk excludes grid architectures such that the estate owner has the same access as the physical owner of Clockwerk.
</p>

<p>
You can change the defaults as you see fit, however if you would like to see the changes pushed onto the update queue, please feel free to e-mail us.
</p>
<pre class="code">Allow_osGetAgentIP = ESTATE_OWNER
Allow_osGetAgents = true
Allow_osKickAgent = PARCEL_GROUP_MEMBER
Allow_osTeleportAgent = PARCEL_GROUP_MEMBER
Allow_osCauseDamage = PARCEL_GROUP_MEMBER
Allow_osCauseHealing = PARCEL_GROUP_MEMBER
Allow_osGetHealth = PARCEL_GROUP_MEMBER
Allow_osGetAgents = PARCEL_GROUP_MEMBER
Allow_osGetSimulatorVersion = PARCEL_GROUP_MEMBER
Allow_osTeleportAgent = PARCEL_GROUP_MEMBER
Allow_osAvatarName2Key = true
Allow_osGetNotecard = true
Allow_osGetNotecardLine = true
Allow_osGetNumberOfNotecardLines = true
Allow_osMakeNotecard = true
Allow_osNpcCreate = PARCEL_GROUP_MEMBER
Allow_osNpcMoveTo = PARCEL_GROUP_MEMBER
Allow_osNpcMoveToTarget = PARCEL_GROUP_MEMBER
Allow_osNpcStopMoveToTarget = PARCEL_GROUP_MEMBER
Allow_osNpcSetRot = PARCEL_GROUP_MEMBER
Allow_osNpcGetRot = PARCEL_GROUP_MEMBER
Allow_osNpcGetPos = PARCEL_GROUP_MEMBER
Allow_osNpcRemove = PARCEL_GROUP_MEMBER
Allow_osNpcSay = PARCEL_GROUP_MEMBER
Allow_osNpcWhisper = PARCEL_GROUP_MEMBER
Allow_osNpcTouch = PARCEL_GROUP_MEMBER
Allow_osNpcIsNpc = PARCEL_GROUP_MEMBER
Allow_osNpcGetOwner = PARCEL_GROUP_MEMBER
Allow_osNpcSit = PARCEL_GROUP_MEMBER  
Allow_osNpcStand = PARCEL_GROUP_MEMBER
Allow_osOwnerSaveAppearance = PARCEL_GROUP_MEMBER
Allow_osNpcLoadAppearance = PARCEL_GROUP_MEMBER  
Allow_osNpcSaveAppearance = PARCEL_GROUP_MEMBER  
Allow_osAvatarPlayAnimation = PARCEL_GROUP_MEMBER
Allow_osAvatarStopSnimation = PARCEL_GROUP_MEMBER
Allow_osMessageObject = PARCEL_GROUP_MEMBER
Allow_osGetRezzingAgent = PARCEL_GROUP_MEMBER
Allow_osIsUUID = true
Allow_osListenRegex = PARCEL_GROUP_MEMBER
Allow_osMessageAttachments = PARCEL_GROUP_MEMBER
Allow_osMovePen = true
Allow_osDrawLine = true
Allow_osDrawText = true
Allow_osDrawEllipse = true
Allow_osDrawRectangle = true
Allow_osDrawFilledRectangle = true
Allow_osDrawPolygon = true
Allow_osDrawFilledPolygon = true
Allow_osDrawImage = true
Allow_osGetDrawStringSize = true
Allow_osSetFontName = true
Allow_osSetFontSize = true
Allow_osSetPenSize = true
Allow_osSetPenColor = true
Allow_osSetPenCap = true
Allow_osSetDynamicTextureData = true
Allow_osSetDynamicTextureDataBlend = true
Allow_osSetDynamicTextureDataBlendFace = true
Allow_osSetDynamicTextureURL = true
Allow_osSetDynamicTextureURLBlend = true
Allow_osSetDynamicTextureURLBlendFace = true
Allow_osParcelJoin = PARCEL_OWNER
Allow_osParcelSubdivide = PARCEL_OWNER
Allow_osSetParcelDetails = PARCEL_OWNER
Allow_osGetTerrainHeight = PARCEL_OWNER
Allow_osSetTerrainHeight = PARCEL_OWNER
Allow_osTerrainFlush = PARCEL_OWNER
Allow_osSetTerrainTeture = PARCEL_OWNER
Allow_osSetTerrainTextureHeight = PARCEL_OWNER
Allow_osSetRegionWaterHeight = ESTATE_OWNER
Allow_osSetRegionSunSettings = ESTATE_OWNER
Allow_osSetEstateSunSettings = ESTATE_OWNER
Allow_osGetCurrentSunHour = ESTATE_OWNER
Allow_osGetSunParam = ESTATE_OWNER
Allow_osSetSunParam = ESTATE_OWNER
Allow_osWindActiveModelPluginName = ESTATE_OWNER
Allow_osGetWindParam = ESTATE_OWNER
Allow_osSetWindParam = ESTATE_OWNER
Allow_osGetGridName = ESTATE_OWNER
Allow_osGetGridNick = ESTATE_OWNER
Allow_osGetGridLoginURI = ESTATE_OWNER
Allow_osGetGridHomeURI = ESTATE_OWNER
Allow_osGetGridGatekeeperURI = ESTATE_OWNER
Allow_osGetGridCustom = ESTATE_OWNER
Allow_osGetScriptEngineName = ESTATE_OWNER
Allow_osGetSimulatorVersion = ESTATE_OWNER
Allow_osGetSimulatorMemory = ESTATE_OWNER
Allow_osGetMapTexture = ESTATE_OWNER
Allow_osGetRegionMapTexture = ESTATE_OWNER
Allow_osGetRegionStats = ESTATE_OWNER
Allow_osLoadedCreationDate = ESTATE_OWNER
Allow_osLoadedCreationTime = ESTATE_OWNER
Allow_osLoadedCreationID = ESTATE_OWNER
Allow_osGetPhysicsEngineType = ESTATE_OWNER
Allow_osRegionNotice = ESTATE_OWNER
Allow_osRegionRestart = ESTATE_OWNER
Allow_osConsoleCommand = ESTATE_OWNER
Allow_osSetParcelMediaURL = PARCEL_GROUP_MEMBER
Allow_osSetPrimFloatOnWater = ESTATE_OWNER
Allow_osSetParcelSIPAddress = PARCEL_GROUP_MEMBER
Allow_osSetStateEvents = ESTATE_OWNER
Allow_osList2Double = true
Allow_osKey2Name = true
Allow_osFormatString = true
Allow_osMatchString = true
Allow_osUnixTimeToTimestamp = true
Allow_osParseJSON = true 
Allow_osParseJSONNew = true
Allow_osMax = true
Allow_osMin = true
Allow_osRegexIsMatch = true
Allow_osReplaceString = true
Allow_osSetContentType = true
</pre>

</div>

<h1 class="sectionedit12" id="web_management_features">Web Management Features</h1>
<div class="level1">

<p>
The web-interface that is displayed to connecting clients, is served by <code>lighttpd</code> from <code>/var/www</code> and has the following features:
</p>
<ul>
<li class="level1"><div class="li"> Creating new accounts.</div>
</li>
<li class="level1"><div class="li"> Downloading inventory archives (IARs).</div>
</li>
<li class="level1"><div class="li"> Uploading inventory archives.</div>
</li>
<li class="level1"><div class="li"> Downloading region archives (OARs).</div>
</li>
<li class="level1"><div class="li"> Uploading region archives.</div>
</li>
</ul>

<p>
and is protected by CAPTCHAs. However, one major limitation and potential security concern for cross-domain logins is that not all viewers support displaying pages served over <code>https</code>, in which case passwords on account creation will be served over plaintext. In VIBE&#039;s case, we have IP-level limitations that block external access, especially to grids that have to be used by students which makes this security limitation trivial until viewer developers will be able to include serving pages over <code>https</code>.
</p>

<p>
The following privacy rules are implemented for IAR and OAR handling:
</p>
<ul>
<li class="level1"><div class="li"> Every user can download and upload their own IAR file using the web-interface.</div>
</li>
<li class="level1"><div class="li"> Every region owner can download and upload the OAR of the region they own using the web-interface.</div>
</li>
</ul>

</div>

<h2 class="sectionedit13" id="opensim_console_access">OpenSim Console Access</h2>
<div class="level2">

<p>
<video class="media" width="800" height="480" controls="controls">
<source src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/video/opensim_clockwerk_console_feature.mp4" type="video/mp4" />
<a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/video/opensim_clockwerk_console_feature.mp4?cache=" class="media mediafile mf_mp4" title="video:opensim_clockwerk_console_feature.mp4 (3.5 MB)">opensim_clockwerk_console_feature.mp4</a></video>

</p>

<p>
Clockwerk allows access to the OpenSim console directly from the log-in screen of any compatible viewer. This allows grid-owners to manage their own regions by directly commanding OpenSim from a web-browser or any viewer that supports OpenSim.
</p>

<p>
This feature can be accessed from the log-in screen of Clockwerk by clicking the &quot;Console&quot; button. Clockwerk will then ask for a user-name and password. By default, the username is <code>admin</code> and the password is <code>password</code>) but these values can be changed by editing the <code>/etc/guacamole/user-mapping.xml</code> and changing the line:
</p>
<pre class="code">&lt;authorize username=&quot;admin&quot; password=&quot;password&quot;&gt;</pre>

<p>
in order to set an username and password. After that, Clockwerk needs to be reset and then grid-owners will be able to access their own OpenSim console.
</p>

<p>
The console can be accessed by visiting:
</p>
<pre class="code">http://clockwerk-grid-hostname/guacamole</pre>

<p>
where Clockwerk will prompt for the username and password specified earlier.
</p>

</div>

<h1 class="sectionedit14" id="virtual_machine">Virtual Machine</h1>
<div class="level1">

<p>
The Virtual Machine is set-up so that it allows users to update the entire system from the Wizardry and Steamworks servers. Updates take place over <code>SVN</code> so that when we have an update, users can use a provided script to pull the changes and update the machine. The demonstration video shows an example update process of Clockwerk. Similarly, Wizardry and Steamworks provides a set of management tools that facilitate the management of Clockwerk.
</p>

</div>

<h2 class="sectionedit15" id="optimizations">Optimizations</h2>
<div class="level2">

<p>
Clockwerk includes a number of optimizations, including a custom kernel, network tweaks for broadband access and filesystem tweaks.
</p>

</div>

<h3 class="sectionedit16" id="kernel-level_tweaks">Kernel-level Tweaks</h3>
<div class="level3">

<p>
The kernel is compiled with and enables <code>hugetables</code> on boot as well as threaded <code>IRQ</code>s. You can recompile the kernel by going to <code>/usr/src/linux-image-3.2.51</code>.
</p>

</div>

<h3 class="sectionedit17" id="sysctl_tweaks">Sysctl Tweaks</h3>
<div class="level3">

<p>
<code>sysctl</code> tweaks are entered into the <code>/etc/sysctl.d/local.conf</code> file:
</p>
<pre class="code">kernel.panic = 30
kernel.panic_on_oops = 30
kernel.sysrq = 0
kernel.core_uses_pid = 1
kernel.pid_max = 65536
kernel.randomize_va_space = 1
kernel.msgmnb = 65536
kernel.msgmax = 65536
vm.dirty_ratio = 60
vm.dirty_background_ratio = 2
vm.mmap_min_addr = 4096
vm.overcommit_ratio = 0
vm.overcommit_memory = 0
kernel.shmmax = 268435456
kernel.shmall = 268435456
vm.min_free_kbytes = 65536
net.ipv4.tcp_syncookies = 1
net.ipv4.tcp_syn_retries = 5
net.ipv4.tcp_synack_retries = 2
net.ipv4.tcp_max_syn_backlog = 4096
net.ipv4.ip_forward = 0
net.ipv4.conf.all.send_redirects = 0
net.ipv4.conf.default.send_redirects = 0
net.ipv4.conf.all.accept_source_route = 0
net.ipv4.conf.default.accept_source_route = 0
net.ipv6.conf.all.accept_source_route = 0
net.ipv6.conf.default.accept_source_route = 0
net.ipv4.conf.all.rp_filter = 1
net.ipv4.conf.default.rp_filter = 1
net.ipv4.conf.all.accept_redirects = 0
net.ipv4.conf.default.accept_redirects = 0
net.ipv6.conf.all.accept_redirects = 0
net.ipv6.conf.default.accept_redirects = 0
net.ipv4.conf.all.log_martians = 0
net.ipv4.conf.default.log_martians = 0
net.ipv4.tcp_fin_timeout = 15
net.ipv4.tcp_keepalive_time = 300
net.ipv4.tcp_keepalive_probes = 5
net.ipv4.tcp_keepalive_intvl = 15
net.ipv4.tcp_slow_start_after_idle = 0
net.ipv4.conf.all.bootp_relay = 0
net.ipv4.conf.all.proxy_arp = 0
net.ipv4.tcp_dsack = 1
net.ipv4.tcp_sack = 1
net.ipv4.tcp_fack = 1
net.ipv4.tcp_timestamps = 1
net.ipv4.icmp_echo_ignore_all = 0
net.ipv4.icmp_echo_ignore_broadcasts = 1
net.ipv4.icmp_ignore_bogus_error_responses = 1
net.ipv4.tcp_rfc1337 = 1
net.ipv4.ip_no_pmtu_disc = 1
net.ipv4.tcp_congestion_control = htcp
net.ipv4.tcp_window_scaling = 1
net.ipv4.conf.all.arp_ignore = 1
net.ipv4.conf.all.arp_filter = 1
net.ipv4.tcp_mem = 65536 131072 262144
net.ipv4.udp_mem = 65536 131072 262144
net.ipv4.tcp_rmem = 8192 87380 16777216
net.ipv4.udp_rmem_min = 16384
net.core.rmem_default = 131072
net.core.rmem_max = 16777216
net.ipv4.tcp_wmem = 8192 65536 16777216
net.ipv4.udp_wmem_min = 16384
net.core.wmem_default = 131072
net.core.wmem_max = 16777216
net.core.somaxconn = 32768
net.core.netdev_max_backlog = 4096
net.core.dev_weight = 64
net.core.optmem_max = 65536
net.ipv4.tcp_max_tw_buckets = 1440000
net.ipv4.tcp_tw_recycle = 1
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_max_orphans = 16384
net.ipv4.tcp_orphan_retries = 0
net.ipv4.ipfrag_high_thresh = 524288
net.ipv4.ipfrag_low_thresh = 446464
net.ipv4.tcp_no_metrics_save = 1
net.ipv4.tcp_moderate_rcvbuf = 1
net.unix.max_dgram_qlen = 50
net.ipv4.neigh.default.gc_thresh3 = 2048
net.ipv4.neigh.default.gc_thresh2 = 1024
net.ipv4.neigh.default.gc_thresh1 = 32
net.ipv4.neigh.default.gc_interval = 30
net.ipv4.neigh.default.proxy_qlen = 96
net.ipv4.neigh.default.unres_qlen = 6
net.ipv4.tcp_ecn = 1
net.ipv4.tcp_ecn = 2
net.ipv4.tcp_reordering = 3
net.ipv4.tcp_retries2 = 15
net.ipv4.tcp_retries1 = 3
net.ipv4.route.flush = 1
net.ipv6.route.flush = 1
net.ipv4.tcp_mtu_probing=1
vm.dirty_background_ratio = 80
vm.dirty_ratio = 90
vm.dirty_expire_centisecs = 6000
vm.dirty_writeback_centisecs = 4000
kernel.sched_min_granularity_ns = 10000000
kernel.sched_wakeup_granularity_ns = 15000000
fs.suid_dumpable = 0
</pre>

<p>
and they include a number of optimizations, such as decreasing the swapiness and network-level enhancements.
</p>

</div>

<h3 class="sectionedit18" id="filesytem_tweaks">Filesytem Tweaks</h3>
<div class="level3">

<p>
Clockwerk mounts the root partition as <code>jfs</code> in order to optimize accesses to the MySQL database in <code>/var</code>. Compared to its predecessor, the Spectacled Owl, Clockwerk simplifies the filesystem by switching to only one working partition.
</p>

</div>

<h2 class="sectionedit19" id="hardware_requirements">Hardware Requirements</h2>
<div class="level2">

<p>
To set-up the virtual machine, the Spectacled Owl needs a bridged network. The development machine used in the demonstration video has the following configuration:
</p>
<div class="table sectionedit20"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Asset </th><th class="col1"> Value </th><th class="col2 leftalign"> Comments                                          </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> <code>CPU</code>   </td><td class="col1 leftalign"> <code>2</code>     </td><td class="col2"> OpenSim tends to love CPUs, the more, the merrier. </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>RAM</code>   </td><td class="col1 leftalign"> <code>2GB</code>   </td><td class="col2"> Seems to be sufficient even for large 15k primitive regions. </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>NET</code>   </td><td class="col1"> Bridge </td><td class="col2"> The Spectacled Owl needs a real IP, regardless if it is a class <code>C</code> address. It is possible to use <code>iptables</code> to <code>NAT</code> the ports from <code>/srv/opensim/Regions/Regions.ini</code> if the Spectacled Owl has to run behind a firewall. </td>
	</tr>
</table></div>

<p>
Make sure to remove irrelevant hardware such as printers, floppy drives and other hardware from the Virtual Machine that would only overload the kernel and slow down the machine.
</p>

</div>

<h2 class="sectionedit21" id="passwords_and_accounts">Passwords and Accounts</h2>
<div class="level2">
<div class="table sectionedit22"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Description          </th><th class="col1 leftalign"> Value        </th><th class="col2"> Comments </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> system root password </td><td class="col1"> <code>password</code> </td><td class="col2"> can be changed using <code>passwd root</code> </td>
	</tr>
	<tr class="row2">
		<td class="col0"> opensim account password </td><td class="col1"> <code>password</code> </td><td class="col2"> can be changed using <code>passwd opensim</code> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> SSH port                 </td><td class="col1"> <code>54377</code> </td><td class="col2"> can be changed by editing <code>/etc/sshd_config</code>; set to <code>54377</code> to avoid automated attacks. </td>
	</tr>
	<tr class="row4">
		<td class="col0"> opensim mysql password </td><td class="col1"> <code>***</code> </td><td class="col2"> no point in changing it since <code>OpenSim</code> connects over loopback. </td>
	</tr>
	<tr class="row5">
		<td class="col0"> console admin from web-interface </td><td class="col1"> <code>password</code> </td><td class="col2"> can be changed by editing <code>/etc/guacamole/user-mapping.xml</code> </td>
	</tr>
</table></div>

</div>

<h2 class="sectionedit23" id="bundled_running_software_daemons">Bundled Running Software Daemons</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://www.sshguard.net/" class="urlextern" title="http://www.sshguard.net/" rel="ugc nofollow">sshguard</a> to prevent automated attacks.</div>
</li>
<li class="level1"><div class="li"> The VMs include a software watchdog meant to reset the VM on kernel panics and hangs as well as high load.</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.lighttpd.net/" class="urlextern" title="http://www.lighttpd.net/" rel="ugc nofollow">lighttpd</a> is serving the web-management pages.</div>
</li>
</ul>

</div>

<h2 class="sectionedit24" id="filesystem_structure">Filesystem Structure</h2>
<div class="level2">

<p>
<img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/opensim/clockwerk?ditaa=7727cfde16ac85e88d668811aab05118&amp;t=1656282717" class="media" alt=""/>
</p>

<p>
Some of the important folders are:
</p>
<div class="table sectionedit25"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Folder                 </th><th class="col1"> Description </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0"> <code>clockwerk-opensim-config</code> </td><td class="col1"> Contains various configuration files for OpenSim. </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>clockwerk-opensim</code> </td><td class="col1"> OpenSim sources with custom patches. </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>clockwerk-www</code> </td><td class="col1"> The source of the web-based management interface. </td>
	</tr>
</table></div>

<p>
the folders are pulled from Wizardry and Steamworks by the <code>upgrade</code> script and then injected into the Clockwerk virtual machine. This allows us to push development patches to our users and to tweak the virtual machine on each run. We understand that some users prefer their privacy (instead of our trojan horse and a gentleman&#039;s parole), in which case the entire <code>clockwerk</code> folder can be deleted and the machine will still function properly leaving updates (and forks) up to the user.
</p>

<p>
The <code>/root</code> filesystem is <code>jfs</code>.
</p>

</div>

<h3 class="sectionedit26" id="upgrade_and_reset">upgrade and reset</h3>
<div class="level3">

<p>
Both scripts, <code>upgrade</code> and <code>reset</code> are written in <code>Bash</code> and menu-driven. The <code>upgrade</code> script prompts before making any change and if there are local changes it allows users to see what changed via SVN. It further allows users to accept those changes or reject them individually. The <code>reset</code> script is meant for re-initializing Clockwerk in order to provide a template for cloning using the virtualization software at hand and should never be run unless you intend to create a new grid.
</p>

</div>

<h3 class="sectionedit27" id="assetcleaner">assetcleaner</h3>
<div class="level3">

<p>
The <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/database/asset_cleaner" class="wikilink1" title="opensim:database:asset_cleaner" data-wiki-id="opensim:database:asset_cleaner">asset cleaner</a> is written in <code>PHP</code> and takes as parameter <code>ALL</code> the <code>IARs</code> and <code>OARs</code> of the grid. It will then connect to the OpenSim instance and track down any dangling references to assets, effectively wiping assets that are not used. For further details please consult the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/database/asset_cleaner" class="wikilink1" title="opensim:database:asset_cleaner" data-wiki-id="opensim:database:asset_cleaner">asset cleaner project page</a>.
</p>

</div>

<h3 class="sectionedit28" id="iardumper">iardumper</h3>
<div class="level3">

<p>
The <code>iardumper</code> can be used to dump user inventories and pack them in <code>IAR</code> archives (which are  zipped tape archives). Note that users can access their <code>IAR</code>s at any time using the web-interface and that this tool is to be used by the administrator only.
</p>

<p>
<code>iardumper</code> is also triggered every day, and dumps the <code>IAR</code>s of all avatars to <code>/var/lib/iar</code> using a path based on the avatar name. For example, <code>iardumper</code> will dump an avatar named &quot;Test User&quot; to <code>/var/lib/iar/Test_User/Test_User.iar</code>. This file is then used to serve <code>IAR</code>s via the web-interface.
</p>

</div>

<h3 class="sectionedit29" id="osstrap">osstrap</h3>
<div class="level3">

<p>
<code>osstrap</code> runs on every startup and tries to guess the VM&#039;s <code>IP</code> address. It then proceeds to update OpenSim by setting the corresponding parameters in the various configuration files, and then start OpenSim on the first console. The project can be found on the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/virtual_machines/osstrap" class="wikilink1" title="opensim:virtual_machines:osstrap" data-wiki-id="opensim:virtual_machines:osstrap">osstrap project page</a>.
</p>

</div>

<h3 class="sectionedit30" id="firewall">firewall</h3>
<div class="level3">

<p>
The <code>firewall</code> script configures the firewall and stores it across reboots using persistent tables. A good suggestion is to move this script out of the way and to edit it manually unless you are comfortable with using our recommended settings.
</p>
<pre class="code bash"><span class="co0">#!/bin/bash</span>
<span class="co0">###########################################################################</span>
<span class="co0">##  Copyright (C) Wizardry and Steamworks 2014 - License: GNU GPLv3      ##</span>
<span class="co0">##  Please see: http://www.gnu.org/licenses/gpl.html for legal details,  ##</span>
<span class="co0">##  rights of fair usage, the disclaimer and warranty conditions.        ##</span>
<span class="co0">###########################################################################</span>
&nbsp;
iptables <span class="re5">-F</span>
iptables <span class="re5">-X</span>
iptables <span class="re5">-t</span> nat <span class="re5">-F</span>
iptables <span class="re5">-t</span> nat <span class="re5">-X</span>
iptables <span class="re5">-t</span> mangle <span class="re5">-F</span>
iptables <span class="re5">-t</span> mangle <span class="re5">-X</span>
&nbsp;
<span class="co0"># SSH Guard</span>
iptables <span class="re5">-N</span> sshguard
iptables <span class="re5">-A</span> INPUT <span class="re5">-j</span> sshguard
ip6tables <span class="re5">-A</span> INPUT <span class="re5">-j</span> sshguard
<span class="co0"># Drop by default</span>
iptables <span class="re5">-P</span> INPUT DROP
<span class="co0"># Always accept loopback</span>
iptables <span class="re5">-A</span> INPUT <span class="re5">-i</span> lo <span class="re5">-j</span> ACCEPT
<span class="co0"># Measure idle for suspend</span>
iptables <span class="re5">-A</span> INPUT <span class="re5">-i</span> eth0 <span class="re5">-p</span> tcp <span class="re5">-m</span> multiport <span class="re5">--dport</span> <span class="nu0">9000</span>,<span class="nu0">80</span> <span class="re5">-j</span> IDLETIMER <span class="re5">--timeout</span> <span class="nu0">600</span> <span class="re5">--label</span> clockwerk
<span class="co0"># Shaping traffic</span>
iptables <span class="re5">-t</span> mangle <span class="re5">-A</span> PREROUTING <span class="re5">-p</span> tcp <span class="re5">--dport</span> <span class="nu0">9000</span> <span class="re5">-j</span> TOS <span class="re5">--set-tos</span> Minimize-Delay
iptables <span class="re5">-t</span> mangle <span class="re5">-A</span> PREROUTING <span class="re5">-p</span> udp <span class="re5">--dport</span> <span class="nu0">9000</span> <span class="re5">-j</span> TOS <span class="re5">--set-tos</span> Minimize-Delay
iptables <span class="re5">-t</span> mangle <span class="re5">-A</span> PREROUTING <span class="re5">-p</span> tcp <span class="re5">--sport</span> <span class="nu0">9000</span> <span class="re5">-j</span> TOS <span class="re5">--set-tos</span> Minimize-Delay
iptables <span class="re5">-t</span> mangle <span class="re5">-A</span> PREROUTING <span class="re5">-p</span> udp <span class="re5">--sport</span> <span class="nu0">9000</span> <span class="re5">-j</span> TOS <span class="re5">--set-tos</span> Minimize-Delay
<span class="co0"># Accept related</span>
iptables <span class="re5">-A</span> INPUT <span class="re5">-m</span> state <span class="re5">--state</span> RELATED,ESTABLISHED <span class="re5">-j</span> ACCEPT
<span class="co0"># SSH</span>
iptables <span class="re5">-A</span> INPUT <span class="re5">-i</span> eth0 <span class="re5">-p</span> tcp <span class="re5">--dport</span> <span class="nu0">54377</span> <span class="re5">-j</span> ACCEPT
<span class="co0"># OpenSim</span>
iptables <span class="re5">-A</span> INPUT <span class="re5">-i</span> eth0 <span class="re5">-p</span> tcp <span class="re5">--dport</span> <span class="nu0">9000</span>:<span class="nu0">9000</span> <span class="re5">-j</span> ACCEPT
iptables <span class="re5">-A</span> INPUT <span class="re5">-i</span> eth0 <span class="re5">-p</span> udp <span class="re5">--dport</span> <span class="nu0">9000</span>:<span class="nu0">9000</span> <span class="re5">-j</span> ACCEPT
<span class="co0"># Web</span>
iptables <span class="re5">-A</span> INPUT <span class="re5">-i</span> eth0 <span class="re5">-p</span> tcp <span class="re5">--dport</span> <span class="nu0">80</span> <span class="re5">-j</span> ACCEPT
<span class="co0"># Samba</span>
iptables <span class="re5">-A</span> INPUT <span class="re5">-i</span> eth0 <span class="re5">-p</span> tcp <span class="re5">--dport</span> <span class="nu0">445</span> <span class="re5">-j</span> ACCEPT
&nbsp;
<span class="co0"># Save</span>
iptables-save <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>iptables<span class="sy0">/</span>rules.v4</pre>

<p>
The firewall allows one single region <code>9000</code>, and you will have to edit it and change the rules to allow for more regions. The <code>sshguard</code> jump tables are important because they allow <code>sshguard</code> to block automated attacks to system services. Perhaps a good guide to fleshing the firewall is to consult the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/iptables" class="wikilink1" title="fuss:iptables" data-wiki-id="fuss:iptables">iptables FUSS page</a>.
</p>

</div>

<h3 class="sectionedit31" id="fix_file_permissions">fix_file_permissions</h3>
<div class="level3">

<p>
This script is based on the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/unix/fix_file_permissions" class="wikilink1" title="unix:fix_file_permissions" data-wiki-id="unix:fix_file_permissions">fix file permissions script</a> and is meant to periodically reset the appropriate permissions to the filesystem as if the system has been freshly installed.
</p>

</div>

<h1 class="sectionedit32" id="making_local_configuration_changes">Making Local Configuration Changes</h1>
<div class="level1">

<p>
Clockwerk uses one additional configuration file <code>Clockwerk.ini</code> that is placed under <code>/srv/opensim</code>. This file is included by OpenSim and any local preferences should be added to <code>Clockwerk.ini</code> instead of modifying the OpenSim configuration files directly. When you upgrade Clockwerk through <code>clockwerk-upgrade</code> the OpenSim configuration files will be overwritten (except for <code>Regions.ini</code>) but <code>Clockwerk.ini</code> will be preserved, thus making updates seamless.
</p>

</div>

<h1 class="sectionedit33" id="upgrading_clockwerk">Upgrading Clockwerk</h1>
<div class="level1">

<p>
To upgrade Clockwerk, log-in as <code>root</code> and issue <code>clockwerk-upgrade</code>. You will be prompted by a dialog-driven wizard that will pull all the latest changes from the Wizardry and Steamworks development branch and update the system.
</p>

<p>
The upgrade procedure proceeds in the following order:
</p>
<ol>
<li class="level1"><div class="li"> packages from <code>uninstall-packages.txt</code> are removed and packages from <code>install-packages.txt</code> are installed.</div>
</li>
<li class="level1"><div class="li"> the upgrade script calls <code>aptitude upgrade</code> in order to update the Debian distribution.</div>
</li>
<li class="level1"><div class="li"> the filesystem is injected with the tree in <code>lib/fs</code> which deploys system scripts (for example, the periodic suspend script <code>clockwerk_pm</code>).</div>
</li>
<li class="level1"><div class="li"> the opensim sources are pulled from the Wizardry and Steamworks repository and the user is prompted to upgrade OpenSim if any changes were made.</div>
</li>
<li class="level1"><div class="li"> the user is prompted to replace the OpenSim configuration files with updated versions from the Wizardry and Steamworks repository.</div>
</li>
<li class="level1"><div class="li"> the website pages used by OpenSim are updated if the user chooses to do so.</div>
</li>
<li class="level1"><div class="li"> the user is asked to apply the latest firewall changes.</div>
</li>
<li class="level1"><div class="li"> the upgrade script offers to restart OpenSim.</div>
</li>
</ol>

<p>
Any of these steps can be skipped by answering <code>No</code>. For example, it may be useful to update the firewall from the repositories, as a reference, but to create your own copy and modify it. The upgrade script allows you to do that. 
</p>

</div>

<h1 class="sectionedit34" id="deploying_clockwerk">Deploying Clockwerk</h1>
<div class="level1">

<p>
To create a brand-new template for cloning, log-in as root and issue <code>clockwerk-reset</code>. This will wipe Clockwerk, database, logs and other junk so that you can use your virtualization software to clone or make a template of the machine. Please remember to reset the <code>MAC</code> address of the network card when starting a new VM.
</p>

</div>

<h1 class="sectionedit35" id="contrast_to_other_projects">Contrast to Other Projects</h1>
<div class="level1">

<p>
The first project worth mentioning is <a href="http://brokentablet.arl.army.mil/" class="urlextern" title="http://brokentablet.arl.army.mil/" rel="ugc nofollow">Military Open Simulator Enterprise Strategy (MOSES)</a>. They have a similar set-up that Wizardry and Steamworks that we made for VIBE. There are a few differences between the Spectacled Owl and MOSES that are worth mentioning:
</p>
<ul>
<li class="level1"><div class="li"> They use BSD for the guest system - which is a good choice considering that BSD screens most applications that are allowed into their distribution. On the other hand, BSD is slow paced and better performance can be achieved with Linux, albeit on the pretext of loosing stability. Nevertheless, our previous version, Snowy Owl made in 2011 was based on BSD and we have experienced more crashes than we do now.</div>
</li>
<li class="level1"><div class="li"> Clockwerk can be updated without rolling out new VM templates, thus making development easier by injecting changes directly into the existing VMs.</div>
</li>
<li class="level1"><div class="li"> MOSES uses grid-wide services, even though they virtualize their grids, which obviously backfires and introduces a single point of failure. Most problems are related to grid-services when they are accessed from many sources (ie: they span up to 117 grids). We have experienced the same OpenSim annoyances (reappearing primitives, minutes-long lag, etc...) on Science Sim, that also use grid-wide services.</div>
</li>
</ul>

<p>
The second project worth mentioning is <a href="http://www.simonastick.com/" class="urlextern" title="http://www.simonastick.com/" rel="ugc nofollow">Sim-on-a-Stick</a>, that bundles OpenSim and a viewer, making OpenSim portable. This does resemble the Spectacled Owl, given that Sim-on-a-Stick is just the payload. It is possible to run the Spectacled Owl on an USB stick with a portable version of <code>qemu</code>.
</p>

</div>

<h1 class="sectionedit36" id="copyright">Copyright</h1>
<div class="level1">

<p>
Clockwerk is a virtual machine that contains a bunch of software packages, none of which are proprietary (including any non-free, yet distributable software from the Debian Linux distribution). As such, the software on the Spectacled Owl distributed hard-drive is copyright to their respective owners. Wizardry and Steamworks contributes with software as well, indicated by the Wizardry and Steamworks copyright header, which is copyrighted to the Wizardry and Steamworks group under the GNU GPLv3 license or MIT license where indicated.
</p>

<p>
As far as our contributions go, you are allowed to freely distribute them, modify, distribute and sell them provided you have the agreement of the other involved contributors. Keep in mind that not all free-to-distribute licenses are also free to commercialise and that GNU GPLv3 does not mean public domain.
</p>

</div>

<h1 class="sectionedit37" id="index">Index</h1>
<div class="level1">

<div><div id="nojs_indexmenu_165082547562b8de5db12ee" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1" ><div class="li"><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk/knock_teleport" class="wikilink1" title="opensim:clockwerk:knock_teleport" data-wiki-id="opensim:clockwerk:knock_teleport">knock_teleport</a></div></li>
<li class="level1" ><div class="li"><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk/virtual_box" class="wikilink1" title="opensim:clockwerk:virtual_box" data-wiki-id="opensim:clockwerk:virtual_box">virtual_box</a></div></li>
</ul>
</div></div>
<script type='text/javascript' charset='utf-8'>
<!--//--><![CDATA[//><!--
var indexmenu_165082547562b8de5db12ee = new dTree('indexmenu_165082547562b8de5db12ee','was.png');
indexmenu_165082547562b8de5db12ee.config.urlbase='http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/';
indexmenu_165082547562b8de5db12ee.config.sepchar='/';
indexmenu_165082547562b8de5db12ee.config.toc=false;
indexmenu_165082547562b8de5db12ee.config.scorespace=true;
indexmenu_165082547562b8de5db12ee.add('opensim/clockwerk',0,-1,"clockwerk",'opensim/clockwerk');
indexmenu_165082547562b8de5db12ee.add('opensim/clockwerk/knock_teleport',1,0,"knock_teleport",0,0,0);
indexmenu_165082547562b8de5db12ee.add('opensim/clockwerk/virtual_box',2,0,"virtual_box",0,0,0);
document.write(indexmenu_165082547562b8de5db12ee);
jQuery(function(){indexmenu_165082547562b8de5db12ee.init(1,0,"",1,0);});
//--><!]]>
</script>

</div>

                    <!-- wikipage stop -->
                                    </div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <div class="docInfo"><bdi>opensim/clockwerk.txt</bdi> · Last modified: 2022/04/19 09:28 (external edit)</div>

            <!-- PAGE ACTIONS -->
            <!-- <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Revisions [O]"><span>Revisions</span></a></li><li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk?do=export_pdf"  class="action export_pdf" rel="nofollow" title="Export to PDF"><span>Export to PDF</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div>--><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer">
    <!-- <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div> -->

		<!-- BREADCRUMBS -->
					<div class="breadcrumbs">
									<div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim" class="wikilink1" title="opensim" data-wiki-id="opensim">opensim</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk" class="wikilink1" title="opensim:clockwerk" data-wiki-id="opensim:clockwerk">clockwerk</a></bdi></div>
											</div>
		
		<!-- ********** BOTTOM BAR ********** -->
		<div class="bar" id="bar__bottom">
		  <div class="bar-left" id="bar__bottomleft">
			<form class="button btn_login" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk"><div class="no"><input type="hidden" name="do" value="login" /><input type="hidden" name="sectok" value="" /><button type="submit" title="Log In">Log In</button></div></form>						<form class="button btn_revs" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk"><div class="no"><input type="hidden" name="do" value="revisions" /><button type="submit" accesskey="o" title="Revisions [O]">Revisions</button></div></form>			                        <form class="button btn_pdf" action="?do=export_pdf" method="POST">
                            <button type="submit" title="PDF">PDF</button>
                        </form>
		  </div>
		  <div class="bar-center">
                        <form class="button btn_home" action="/" method="POST">
                            <button type="submit" title="Home">Home</button>
                        </form>
			<form action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="opensim:clockwerk" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>			<!-- <form id="osssearchform" method="get" action="renderer">
        <input type="hidden" name="use" value="grimore.org">
        <input type="hidden" name="name" value="default">
        <input type="text" id="osssearchbox" name="query">
        <input type="hidden" name="login" value="search">
        <input type="hidden" name="key" value="1a5f74ab3f4df6ce883c4c158540e25e">
        <input type="submit" value="Search">
</form>
 -->
		  </div>
		  <div class="bar-right" id="bar__bottomright">
                        <form class="button btn_contact" action="mailto:%6F%66%66%69%63%65%40%67%72%69%6D%6F%72%65%2E%6F%72%67" method="POST">
                            <button type="submit" title="Contact">Contact</button>
                        </form>
                        <form class="button btn_news" action="/feed.php?mode=recent&amp;type=rss" method="POST">
                            <button type="submit" title="News">News</button>
                        </form>
			<form class="button btn_admin" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/clockwerk"><div class="no"><input type="hidden" name="do" value="admin" /><button type="submit" title="Admin">Admin</button></div></form>								  </div>
		  		</div>

		
</div><!-- /footer -->

<div style="text-align: center;">
    <div style="display:inline-block;">
      <p>
        <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion">
          <img src="/lib/tpl/was/images/button-tor.png" alt="Access website using Tor" />
        </a> 
        <a href="http://ioujrf2uwqairs7l3vyvqp7n2pia3x3wg5w5qtcqvg32zezuezza.b32.i2p/" />
          <img src="/lib/tpl/was/images/button-i2p.png" alt="Access website using i2p" />
        </a>
        <a href="http://pgp.grimore.org/" />
          <img src="/lib/tpl/was/images/button-pgp.png" alt="Wizardry and Steamworks PGP Key" />
        </a>
      </p>
    </div>
<!--    <div style="display:inline-block;">
      <p>
        <a href="http://ij4lpzuyyng6cc4jw5mxibcyjv4rx4uk6x5jijoduglkgjh7mmya.b32.i2p">
          <img src="/lib/tpl/was/images/button-i2p.png" alt="Access website using i2p" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="http://cydia.grimore.org/">
          <img src="/lib/tpl/was/images/button-cydia.png" alt="Wizardry and Steamworks Cydia Repository" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="http://debian.grimore.org/">
          <img src="/lib/tpl/was/images/button-debian.png" alt="Wizardry and Steamworks Debian Repository" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="/opt/pasteboard/" rel="external nofollow">
          <img src="/lib/tpl/was/images/button-live.png" alt="Live Pasteboard" />
        </a> 
      </p>
    </div> -->
    
<br/>

    <p>
      For the copyright, license, warranty and privacy terms for the usage of this website please see the <a
      href="/wiki:license">license</a>, <a href="/wiki:privacy">privacy</a>, <a
      href="/wiki:copyright">copyright</a>
      and the <a href="/wiki:plagiarism">plagiarism</a> pages.
    </p>
</div>
    </div></div><!-- /site -->

    <div class="no"><img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/taskrunner.php?id=opensim%3Aclockwerk&amp;1657307943" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if lte IE 8 ]></div><![endif]-->
</body>
</html>
