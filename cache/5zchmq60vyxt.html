<!DOCTYPE html>
<html lang="was" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>opensim:npc:puppeteer [Wizardry and Steamworks]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="opensim,npc,puppeteer"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/opensearch.php" title="Wizardry and Steamworks"/>
<link rel="start" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/"/>
<link rel="contents" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer?do=index" title="Sitemap"/>
<link rel="manifest" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Changes" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/feed.php?mode=list&amp;ns=opensim:npc"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_export/xhtml/opensim/npc/puppeteer"/>
<link rel="canonical" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer"/>
<link rel="stylesheet" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/css.php?t=was&amp;tseed=24551d22639bdaeb736aec3dca86fd82"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='opensim:npc';var JSINFO = {"plugin_imagemap_mldummy":"http:\/\/3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion\/_media\/wiki\/dokuwiki-128.png","isadmin":0,"isauth":0,"plugin_pdfjs":{"hide_download_button":0},"plugins":{"vshare":{"youtube":"youtube\\.com\/.*[&?]v=([a-z0-9_\\-]+)","vimeo":"vimeo\\.com\\\/(\\d+)","slideshare":"slideshare.*id=(\\d+)","dailymotion":"dailymotion\\.com\/video\/([a-z0-9]+)","archiveorg":"archive\\.org\/(?:embed|details)\/([a-zA-Z0-9_\\-]+)","soundcloud":"soundcloud\\.com\/([\\w-]+\/[\\w-]+)","niconico":"nicovideo\\.jp\/watch\/(sm[0-9]+)","bitchute":"bitchute\\.com\\\/video\\\/([a-zA-Z0-9_\\-]+)","coub":"coub\\.com\\\/view\\\/([a-zA-Z0-9_\\-]+)","odysee":"odysee\\.com\/\\$\/(?:embed|download)\/([-%_?=\/a-zA-Z0-9]+)","youku":"v\\.youku\\.com\/v_show\/id_([0-9A-Za-z=]+)\\.html","bilibili":"bilibili\\.com\\\/video\\\/(BV[0-9A-Za-z]+)","msoffice":"(?:office\\.com.*[&?]videoid=([a-z0-9\\-]+))","msstream":"microsoftstream\\.com\\\/video\\\/([a-f0-9\\-]{36})"}},"id":"opensim:npc:puppeteer","namespace":"opensim:npc","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script charset="utf-8" src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/jquery.php?tseed=34a552433bc33cc9c3bc32527289a0b2"></script>
<script charset="utf-8" src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/js.php?t=was&amp;tseed=24551d22639bdaeb736aec3dca86fd82&amp;template=was"></script>
<!--<![endif]-->
    <!-- <link rel="shortcut icon" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/favicon.ico" />
<link rel="apple-touch-icon" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/apple-touch-icon.png" />
 -->
    <!-- Viewport -->
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!-- Favicon -->
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png?v=2">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png?v=2">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png?v=2">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png?v=2">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png?v=2">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png?v=2">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png?v=2">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png?v=2">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png?v=2">
<link rel="icon" type="image/png" href="/favicon-32x32.png?v=2" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png?v=2" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png?v=2" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png?v=2" sizes="16x16">
<link rel="manifest" href="/manifest.json?v=2">
<link rel="shortcut icon" href="/favicon.ico?v=2">
<meta name="apple-mobile-web-app-title" content="[Wizardry and Steamworks]">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png?v=2">
<meta name="application-name" content="[Wizardry and Steamworks]">
<meta name="theme-color" content="#ffffff">
    <!-- <script async type="text/javascript" src="/lib/tpl/was/loadCSS.js"></script>
    <script async type="text/javascript" src="/lib/tpl/was/cssrelpreload.js"></script> -->
</head>

<body>
    <!--[if lte IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_was     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header">

	    
	<!-- ********** TOP BAR ********** -->
	<div class="bar" id="bar__top">
		<div class="bar-left" id="bar__topleft">
			<form class="button btn_login" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer"><div class="no"><input type="hidden" name="do" value="login" /><input type="hidden" name="sectok" value="" /><button type="submit" title="Log In">Log In</button></div></form>						<form class="button btn_revs" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer"><div class="no"><input type="hidden" name="do" value="revisions" /><button type="submit" accesskey="o" title="Revisions [O]">Revisions</button></div></form>						<form class="button btn_pdf" action="?do=export_pdf" method="POST">
			    <button type="submit" title="PDF">PDF</button>
                        </form>
		</div>
		<div class="bar-center">
		        <form class="button btn_home" action="/" method="POST">
                            <button type="submit" title="Home">Home</button>
                        </form>
			<form action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="opensim:npc:puppeteer" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>			<!-- <form id="osssearchform" method="get" action="renderer">
        <input type="hidden" name="use" value="grimore.org">
        <input type="hidden" name="name" value="default">
        <input type="text" id="osssearchbox" name="query">
        <input type="hidden" name="login" value="search">
        <input type="hidden" name="key" value="1a5f74ab3f4df6ce883c4c158540e25e">
        <input type="submit" value="Search">
</form>
 -->
		</div>
		<div class="bar-right" id="bar__topright">
		        <form class="button btn_contact" action="mailto:%6F%66%66%69%63%65%40%67%72%69%6D%6F%72%65%2E%6F%72%67" method="POST">
			    <button type="submit" title="Contact">Contact</button>
                        </form>
                        <form class="button btn_news" action="/feed.php?type=rss2&amp;ns=opensim:npc:puppeteer&amp;linkto=page&amp;content=abstract" method="POST">
			    <button type="submit" title="News">News</button>
                        </form>
			<form class="button btn_admin" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer"><div class="no"><input type="hidden" name="do" value="admin" /><button type="submit" title="Admin">Admin</button></div></form>								</div>
			</div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim" class="wikilink1" title="opensim" data-wiki-id="opensim">opensim</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc" class="wikilink1" title="opensim:npc" data-wiki-id="opensim:npc">npc</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer" class="wikilink1" title="opensim:npc:puppeteer" data-wiki-id="opensim:npc:puppeteer">puppeteer</a></bdi></div>
                                </div>
    
    <hr class="a11y" />
</div><!-- /header -->

        <div class="wrapper group">

            <!--  -->

            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <!-- <div class="pageId"><span>opensim:npc:puppeteer</span></div> -->

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#change_log">Change Log</a></div></li>
<li class="level1"><div class="li"><a href="#shortnote">Shortnote</a></div></li>
<li class="level1"><div class="li"><a href="#video">Video</a></div></li>
<li class="level1"><div class="li"><a href="#setup">Setup</a></div></li>
<li class="level1"><div class="li"><a href="#appearance">Appearance</a></div></li>
<li class="level1"><div class="li"><a href="#scriptwriting">Scriptwriting</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#command_examples">Command Examples</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="#case_example">Case Example</a></div></li>
<li class="level1"><div class="li"><a href="#continuations">Continuations</a></div></li>
<li class="level1"><div class="li"><a href="#design">Design</a></div></li>
<li class="level1"><div class="li"><a href="#code">Code</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="change_log">Change Log</h1>
<div class="level1">
<div class="wrap_changelog plugin_wrap">
<p>
<strong>22 April 2013</strong>
</p>
<ul>
<li class="level1"><div class="li"> NPCs should now restart on a region restart without needing a script restart by the user.</div>
</li>
</ul>

<p>
<strong>19 April 2013</strong>
</p>
<ul>
<li class="level1"><div class="li"> Merged with <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/data_structures/key-value_pairs" class="wikilink1" title="fuss:data_structures:key-value_pairs" data-wiki-id="fuss:data_structures:key-value_pairs">key-value data syntax</a>, object description format changed. Please synchronize the changes and reset your spawner description.</div>
</li>
</ul>

<p>
<strong>31 March 2013</strong>
</p>
<ul>
<li class="level1"><div class="li"> Added sitting and standing up to the scripting language.</div>
</li>
<li class="level1"><div class="li"> Rewrote the code to use the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/secondlife/persistent_storage/object_description" class="wikilink1" title="secondlife:persistent_storage:object_description" data-wiki-id="secondlife:persistent_storage:object_description">object description storage</a>.</div>
</li>
<li class="level1"><div class="li"> The <code>@wait</code> command is now <code>@pause</code>.</div>
</li>
<li class="level1"><div class="li"> Scripts now reset after a restart.</div>
</li>
</ul>

<p>
<strong>30 March 2013</strong>
</p>
<ul>
<li class="level1"><div class="li"> Added rotations to the scripting language.</div>
</li>
<li class="level1"><div class="li"> Added link-messages (currently, speaking text).</div>
</li>
<li class="level1"><div class="li"> Added endless wandering by omitting the <code>times</code> parameter.</div>
</li>
</ul>
</div>
</div>

<h1 class="sectionedit4" id="shortnote">Shortnote</h1>
<div class="level1">

<p>
The NPC puppeteer can be used to script (in the sense of playwriting) an NPC to move around and perform actions. The LSL script translates an easy-to-grasp semantics from a notecard and then makes the NPC act on them. This can be used, for example, to set-up &quot;real&quot; NPCs for games or simulations where you need a true NPC to move around and act out a &quot;script&quot;.
</p>

</div>

<h1 class="sectionedit5" id="video">Video</h1>
<div class="level1">

<p>
<video class="media" width="512" height="288" controls="controls">
<source src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/video/opensim_puppeteer.mp4" type="video/mp4" />
<a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/video/opensim_puppeteer.mp4?cache=" class="media mediafile mf_mp4" title="video:opensim_puppeteer.mp4 (14.9Â MB)">opensim_puppeteer.mp4</a></video>

</p>

<p>
Soundtrack: Oldtimer - Amiga Game Soundtrack.
</p>

</div>

<h1 class="sectionedit6" id="setup">Setup</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> The very first step is to use the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/appearance_generator" class="wikilink1" title="opensim:npc:appearance_generator" data-wiki-id="opensim:npc:appearance_generator">appearance generator</a> script to generate an appearance notecard. The appearance generator will copy the look of the avatar touching the box it is in. Therefore, it is important to dress your avatar how you would like the NPC to appear.</div>
</li>
</ul>

<p>
The NPC is controlled by a script in the inventory of a primitive. The puppeteer NPC script requires the following items to be present in the same inventory as the script:
</p>
<ul>
<li class="level1"><div class="li"> <code>[WaS-K] NPC Puppeteer</code> - the script found in the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer#code" class="wikilink1" title="opensim:npc:puppeteer" data-wiki-id="opensim:npc:puppeteer">Code section</a>.</div>
</li>
<li class="level1"><div class="li"> A notecard named <code>appearance</code> - this can be generated with the <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/appearance_generator" class="wikilink1" title="opensim:npc:appearance_generator" data-wiki-id="opensim:npc:appearance_generator">appearance generator</a> script.</div>
</li>
<li class="level1"><div class="li"> A notecard named <code>Script</code> - based on the Scriptwriting section (see that section for a working example).</div>
</li>
<li class="level1"><div class="li"> An animation named <code>Stand</code> - this animation will be played by the NPC while it is idle (stand, wait, etc...)</div>
</li>
<li class="level1"><div class="li"> An animation named <code>Walk</code> - this animation will be played by the NPC while it walks.</div>
</li>
</ul>

<p>
This is how a puppeteer primitive should look like:
</p>

<p>
<a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_detail/opensim/npc/opensim_npc_puppeteer_primitive.png?id=opensim%3Anpc%3Apuppeteer" class="media" title="opensim:npc:opensim_npc_puppeteer_primitive.png"><img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/opensim/npc/opensim_npc_puppeteer_primitive.png?w=256&amp;tok=7d56ef" class="media" alt="" width="256" /></a>
</p>

<p>
as you can observe, all the required components are placed inside a box. One may, of course, make the primitive transparent or turn it into an object that will blend-in with the rest of the environment.
</p>

</div>

<h1 class="sectionedit7" id="appearance">Appearance</h1>
<div class="level1">

<p>
The <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/appearance_generator" class="wikilink1" title="opensim:npc:appearance_generator" data-wiki-id="opensim:npc:appearance_generator">appearance generator script</a> can be used to generate an <code>appearance</code> notecard for the puppeteer. That script copies the appearance of the avatar touching the primitive and writes it to a notecard called <code>appearance</code> which is then used by this script. The example shown in the video uses an agent called <code>Alter Ego</code>, however if that agent would be wearing an animal costume, the puppeteer could be used to create very functional animals, as opposed to prim-only alternatives using <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/secondlife/wanderer" class="wikilink1" title="secondlife:wanderer" data-wiki-id="secondlife:wanderer">the OpenSim wanderer script</a>.
</p>

</div>

<h1 class="sectionedit8" id="scriptwriting">Scriptwriting</h1>
<div class="level1">

<p>
The script is supplied as a notecard named <code>Script</code> and dumped in the inventory of the controlling primitive. It uses the following syntax:
</p>
<div class="table sectionedit9"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0"> Command </th><th class="col1"> First Parameter </th><th class="col2 leftalign"> Second Parameter       </th><th class="col3 leftalign"> Description                                                        </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> <code>@spawn</code>   </td><td class="col1 leftalign"> name (string)   </td><td class="col2"> location (vector) </td><td class="col3 leftalign"> Rezzes an NPC with <code>name</code> at a <code>location</code>.                          </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>@walk</code>    </td><td class="col1"> destination (vector) </td><td class="col2 leftalign"> NaN          </td><td class="col3 leftalign"> Makes the NPC walk to <code>destination</code>.                                  </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>@say</code>     </td><td class="col1 leftalign"> phrase (string)      </td><td class="col2 leftalign"> NaN          </td><td class="col3 leftalign"> Makes the NPC speak a <code>phrase</code>.                                       </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <code>@pause</code>    </td><td class="col1"> animation cycles (integer) </td><td class="col2 leftalign"> NaN    </td><td class="col3 leftalign"> Makes the NPC wait for a multiple of standing <code>animation cycles</code>.                            </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <code>@wander</code>  </td><td class="col1"> radius (integer) </td><td class="col2"> cycles (integer) </td><td class="col3"> Makes the NPC wander in <code>radius</code>, for <code>cycles</code> cycles. </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <code>@stop</code>    </td><td class="col1 leftalign"> NaN                        </td><td class="col2 leftalign"> NaN    </td><td class="col3 leftalign"> Halts  the NPC script indefinitely.                                     </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <code>@delete</code>  </td><td class="col1 leftalign"> NaN                        </td><td class="col2 leftalign"> NaN    </td><td class="col3"> Removes the NPC. </td>
	</tr>
	<tr class="row8">
		<td class="col0"> <code>@animate</code> </td><td class="col1"> animation (string) </td><td class="col2"> time (integer) </td><td class="col3"> Makes the NPC trigger the animation <code>animation</code> for <code>time</code> seconds. </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <code>@goto</code>    </td><td class="col1 leftalign"> label (string)     </td><td class="col2 leftalign"> NaN            </td><td class="col3 leftalign"> Jump to the label <code>label</code> in the script.                              </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <code>@rotate</code>  </td><td class="col1 leftalign"> degrees            </td><td class="col2 leftalign"> NaN            </td><td class="col3"> Rotate the NPC <code>degrees</code> around the <code>Z</code> axis. </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <code>@sit</code>     </td><td class="col1 leftalign"> primitive name     </td><td class="col2 leftalign"> NaN            </td><td class="col3"> Sit on a primitive with a given name. </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> <code>@stand</code>   </td><td class="col1 leftalign"> NaN                </td><td class="col2 leftalign"> NaN            </td><td class="col3 leftalign"> If sitting on a primitive, stand up.  </td>
	</tr>
</table></div>

<p>
where every command has to be prefixed with the <code>@</code> symbol. Any lines that do not start with <code>@</code> will be ignored by the script and can be used either as comments or as jump labels for the <code>@goto</code> command.
</p>

</div>

<h2 class="sectionedit10" id="command_examples">Command Examples</h2>
<div class="level2">

<p>
The following are examples for every command:
</p>
<div class="table sectionedit11"><table class="inline">
	<thead>
	<tr class="row0">
		<th class="col0 leftalign"> Command     </th><th class="col1 leftalign"> Example                                                  </th><th class="col2"> Effect </th>
	</tr>
	</thead>
	<tr class="row1">
		<td class="col0 leftalign"> <code>@spawn</code>  </td><td class="col1"> <code>@spawn=Alter Ego|&lt;137.262848, 132.939011, 22.705553&gt;</code> </td><td class="col2"> Will rez an NPC called <code>Alter Ego</code> at the coordinates <code>&lt;137.262848, 132.939011, 22.705553&gt;</code>. </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>@walk</code>   </td><td class="col1 leftalign"> <code>@walk=&lt;138.980637, 137.669067, 22.77791&gt;</code>             </td><td class="col2"> Will make the NPC walk to the coordinates <code>&lt;138.980637, 137.669067, 22.77791&gt;</code> </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>@say</code>    </td><td class="col1 leftalign"> <code>@say=omg, walking is so tiresome...</code>                  </td><td class="col2"> Will make he NPC say on local chat <code>omg, walking is so tiresome...</code> </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <code>@pause</code>   </td><td class="col1 leftalign"> <code>@pause=2</code>                                              </td><td class="col2"> Will pause and stand for <code>2</code> animation cycles. </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <code>@stop</code>   </td><td class="col1 leftalign"> <code>@stop</code>                                                </td><td class="col2"> Will halt all script execution leaving the NPC standing. </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <code>@delete</code> </td><td class="col1 leftalign"> <code>@delete</code>                                              </td><td class="col2"> Will delete the current rezzed NPC. </td>
	</tr>
	<tr class="row7">
		<td class="col0"> <code>@animate</code></td><td class="col1 leftalign"> <code>@animate=Dance,10</code>                                    </td><td class="col2"> Will trigger the animation in the primitive&#039;s inventory named <code>Dance</code> for <code>10</code> seconds. </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <code>@goto</code>   </td><td class="col1 leftalign"> <code>@goto=LABEL</code>                                          </td><td class="col2"> Will jump to the label <code>LABEL</code> and consume the jump. </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <code>@rotate</code> </td><td class="col1 leftalign"> <code>@rotate=90</code>                                           </td><td class="col2"> Will rotate the NPC <code>90</code> degrees around the positive sense of the <code>z</code> axis. </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <code>@sit</code>    </td><td class="col1 leftalign"> <code>@sit=Chair</code>                                           </td><td class="col2"> Will scan for an object named <code>Chair</code> and will make the NPC sit on it. </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <code>@stand</code>  </td><td class="col1"> <code>@stand</code> </td><td class="col2"> Will make the NPC stand up if it is currently sitting on a primitive. </td>
	</tr>
</table></div>

</div>

<h1 class="sectionedit12" id="case_example">Case Example</h1>
<div class="level1">

<p>
Consider the following example <code>Script</code> notecard:
</p>
<pre class="code">@spawn=Alter Ego|&lt;137.262848, 132.939011, 22.705553&gt;
@walk=&lt;138.980637, 137.669067, 22.77791&gt;
@walk=&lt;134.451523, 134.671173, 22.77791&gt;
@say=omg, walking is so tiresome...
@walk=&lt;134.451523, 130.5784, 22.77791&gt;
@pause=2
@walk=&lt;142.783859, 130.871552, 22.77791&gt;
@wander=3|1
@walk=&lt;137.5, 130.871552, 22.77791&gt;
@say=Uff, I&#039;m done...
@animate=Dance|10
@stop
</pre>

<p>
This will make the NPC, in order:
</p>
<ol>
<li class="level1"><div class="li"> rez at the coordinates <code>&lt;137.262848, 132.939011, 22.705553&gt;</code> with the first name <code>Alter</code> and last name <code>Ego</code>.</div>
</li>
<li class="level1"><div class="li"> walk to the point <code>&lt;138.980637, 137.669067, 22.77791&gt;</code>.</div>
</li>
<li class="level1"><div class="li"> walk to the point <code>&lt;134.451523, 134.671173, 22.77791&gt;</code>.</div>
</li>
<li class="level1"><div class="li"> say on local chat &quot;omg, walking is so tiresome...&quot;</div>
</li>
<li class="level1"><div class="li"> walk to the point <code>&lt;134.451523, 130.5784, 22.77791&gt;</code>.</div>
</li>
<li class="level1"><div class="li"> wait at its current location for <code>2</code> seconds.</div>
</li>
<li class="level1"><div class="li"> walk to the point <code>&lt;142.783859, 130.871552, 22.77791&gt;</code>.</div>
</li>
<li class="level1"><div class="li"> wander around its current location in a <code>3</code> meter radius circle and perform a <code>walk-wait</code> cycle once.</div>
</li>
<li class="level1"><div class="li"> walk to the point <code>&lt;137.5, 130.871552, 22.77791&gt;</code>.</div>
</li>
<li class="level1"><div class="li"> say on local chat &quot;Uff, I&#039;m done...&quot;</div>
</li>
<li class="level1"><div class="li"> play the animation <code>Dance</code> for <code>10</code> seconds.</div>
</li>
<li class="level1"><div class="li"> stop and wait forever.</div>
</li>
</ol>

<p>
A <code>walk-wait</code> cycle means a transition from walking to waiting and back. The default behavior of the puppeteer is to repeat all the commands. To avoid that use <code>@stop</code> or <code>@delete</code> at the end of the script.
</p>

</div>

<h1 class="sectionedit13" id="continuations">Continuations</h1>
<div class="level1">

<p>
The <code>@goto</code> command can be used to jump inside the script to a named label. For example:
</p>
<pre class="code">REPEAT
@walk=&lt;138.980637, 137.669067, 22.77791&gt;
@walk=&lt;134.451523, 134.671173, 22.77791&gt;
@say=omg, walking is so tiresome...
@goto=REPEAT</pre>

<p>
Exceptionally, the <code>@goto</code> and the <code>@spawn</code> command are used linearly and removed from the queue once a jump has been performed. In other words, if we wanted to repeat the three previous commands, three times, one would write:
</p>
<pre class="code">REPEAT
@walk=&lt;138.980637, 137.669067, 22.77791&gt;
@walk=&lt;134.451523, 134.671173, 22.77791&gt;
@say=omg, walking is so tiresome...
@goto=REPEAT
@goto=REPEAT
@goto=REPEAT</pre>

<p>
Consequently, it is not possible to write a loop that will never terminate. <code>@goto</code> is only used to repeat certain parts of the script. However, if an endless repetition is desired, then the script can be written without the <code>@stop</code> command which will make the script repeat itself indefinitely.
</p>

<p>
The <code>@goto</code> command supports both forward and backward jumps. For example, in the snippet below:
</p>
<pre class="code">REPEAT
@walk=&lt;138.980637, 137.669067, 22.77791&gt;
@walk=&lt;134.451523, 134.671173, 22.77791&gt;
@say=omg, walking is so tiresome...
@goto=REPEAT
@goto=NEXT
@say=i will never say this...
NEXT
@say=now i can sit around doing nothing
@stop</pre>

<p>
the command <code>@say=i will never say this...</code> will never get executed since after the <code>@goto=REPEAT</code> command, the <code>@goto=NEXT</code> command will jump over <code>@say=i will never say this...</code>.
</p>

</div>

<h1 class="sectionedit14" id="design">Design</h1>
<div class="level1">

<p>
The script is based on automata, allowing for extension to be written that perform other actions (sit, fly, etc...). A rough automata, omitting some states, is illustrated below:
</p>
<div class="wrap_centeralign plugin_wrap">
<p>
<img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/fetch.php?media=wiki:latex:/img723773fe23a8e4f605231d6e5873bb60.png" class="latex_inline" alt="
\begin{tikzpicture}[-&gt;,&gt;=stealth',shorten &gt;=1pt,auto,node distance=2.8cm,
                    semithick]
  \tikzstyle{every state}=[fill=red,draw=none,text=white]
    
  \node[initial,state] (A)                    {$default$};
  \node[state] (B) [below right of=A] {$script$};
  \node[state] (C) [above of=B] {$spawn$};
  \node[state] (D) [above right of=B] {$say$};
  \node[state] (E) [right of=B] {$walk$};
  \node[state] (F) [below of=B] {$wander$};
  \node[state] (G) [below left of=B] {$rotate$};
  \node[state] (H) [left of=B] {$\cdots$};
  
  \path (A) edge	node {} (B)
        (B) edge        node {} (C)
        (C) edge        node {} (B)
        (B) edge        node {} (E)
        (E) edge        node {} (B)
        (B) edge        node {} (D)
        (D) edge        node {} (B)
        (B) edge        node {} (F)
        (F) edge        node {} (B)
        (B) edge        node {} (G)
        (G) edge        node {} (B)
        (B) edge[dotted]        node {} (H)
        (H) edge[dotted]        node {} (B);

\end{tikzpicture}

" title="LaTeX" />
</p>
</div>
<p>
Every state defines an action for the NPC to perform. After the action is preformed, the script returns to the <code>script</code> state which is responsible for interpreting the commands in the notecard. The <code>script</code> state shuffles the commands by using a queue-based approach, where the first enqueued commands get dequeued off from the top of the queue and then enqueued at the end. This ensures that we can repeat the commands instead of deleting them.
</p>

<p>
Also, since the script uses a queue to store the commands, that queue can be easily wound and unwound in order to create continuations, letting the playwright repeat certain commands without having to write them again.
</p>

</div>

<h1 class="sectionedit17" id="code">Code</h1>
<div class="level1">

<p>
<img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_media/opensimcompatiblelogo.png?w=120&amp;tok=3c5fdb" class="media" title="This script was tested and works on OpenSim version 0.7.4!" alt="This script was tested and works on OpenSim version 0.7.4!" width="120" />
</p>
<dl class="file">
<dt><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_export/code/opensim/npc/puppeteer?codeblock=4" title="Download Snippet" class="mediafile mf_lsl">npc_puppeteer.lsl</a></dt>
<dd><pre class="code file lsl2"><span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<span class="co1">//  Copyright (C) Wizardry and Steamworks 2013 - License: GNU GPLv3      //</span>
<span class="co1">//  Please see: http://www.gnu.org/licenses/gpl.html for legal details,  //</span>
<span class="co1">//  rights of fair usage, the disclaimer and warranty conditions.        //</span>
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
&nbsp;
<span class="co1">//////////////////////////////////////////////////////////</span>
<span class="co1">//                  CONFIGURATION                       //</span>
<span class="co1">//////////////////////////////////////////////////////////</span>
&nbsp;
<span class="co1">// How much time, in seconds, does a standing animation </span>
<span class="co1">// cycle take? </span>
<a href="http://wiki.secondlife.com/wiki/float"><span class="kw4">float</span></a> ANIMATION_CYCLE_TIME <span class="sy0">=</span> <span class="nu0">10</span>;
&nbsp;
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<span class="co1">//                              INTERNALS                                //</span>
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
&nbsp;
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<span class="co1">//    Copyright (C) 2013 Wizardry and Steamworks - License: GNU GPLv3    //</span>
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<a href="http://wiki.secondlife.com/wiki/vector"><span class="kw4">vector</span></a> wasCirclePoint<span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/float"><span class="kw4">float</span></a> radius<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/float"><span class="kw4">float</span></a> x <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llPow"><span class="kw5">llPow</span></a><span class="br0">&#40;</span><span class="sy0">-</span><span class="nu0">1</span>, <span class="nu0">1</span> <span class="sy0">+</span> <span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llFrand"><span class="kw5">llFrand</span></a><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">*</span> <a href="http://wiki.secondlife.com/wiki/llFrand"><span class="kw5">llFrand</span></a><span class="br0">&#40;</span>radius<span class="sy0">*</span><span class="nu0">2</span><span class="br0">&#41;</span>;
    <a href="http://wiki.secondlife.com/wiki/float"><span class="kw4">float</span></a> y <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llPow"><span class="kw5">llPow</span></a><span class="br0">&#40;</span><span class="sy0">-</span><span class="nu0">1</span>, <span class="nu0">1</span> <span class="sy0">+</span> <span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llFrand"><span class="kw5">llFrand</span></a><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">*</span> <a href="http://wiki.secondlife.com/wiki/llFrand"><span class="kw5">llFrand</span></a><span class="br0">&#40;</span>radius<span class="sy0">*</span><span class="nu0">2</span><span class="br0">&#41;</span>;
    <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llPow"><span class="kw5">llPow</span></a><span class="br0">&#40;</span>x,<span class="nu0">2</span><span class="br0">&#41;</span> <span class="sy0">+</span> <a href="http://wiki.secondlife.com/wiki/llPow"><span class="kw5">llPow</span></a><span class="br0">&#40;</span>y,<span class="nu0">2</span><span class="br0">&#41;</span> <span class="sy0">&lt;=</span> <a href="http://wiki.secondlife.com/wiki/llPow"><span class="kw5">llPow</span></a><span class="br0">&#40;</span>radius,<span class="nu0">2</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
        <span class="kw1">return</span> <span class="sy0">&lt;</span>x, y, <span class="nu0">0</span><span class="sy0">&gt;</span>;
    <span class="kw1">return</span> wasCirclePoint<span class="br0">&#40;</span>radius<span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<span class="co1">//    Copyright (C) 2013 Wizardry and Steamworks - License: GNU GPLv3    //</span>
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> wasKeyValueGet<span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> var, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> kvp<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> dVars <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>kvp, <span class="br0">&#91;</span><span class="st0">&quot;&amp;&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
    <span class="kw1">do</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> data <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>dVars, <span class="nu0">0</span><span class="br0">&#41;</span>, <span class="br0">&#91;</span><span class="st0">&quot;=&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> k <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">0</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span>k <span class="sy0">!=</span> var<span class="br0">&#41;</span> <span class="kw1">jump</span> continue;
        <span class="kw1">return</span> <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">1</span><span class="br0">&#41;</span>;
@continue;
        dVars <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llDeleteSubList"><span class="kw5">llDeleteSubList</span></a><span class="br0">&#40;</span>dVars, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span> <span class="kw1">while</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetListLength"><span class="kw5">llGetListLength</span></a><span class="br0">&#40;</span>dVars<span class="br0">&#41;</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <span class="st0">&quot;&quot;</span>;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<span class="co1">//    Copyright (C) 2013 Wizardry and Steamworks - License: GNU GPLv3    //</span>
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> wasKeyValueSet<span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> var, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> val, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> kvp<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> dVars <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>kvp, <span class="br0">&#91;</span><span class="st0">&quot;&amp;&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
    <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetListLength"><span class="kw5">llGetListLength</span></a><span class="br0">&#40;</span>dVars<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="kw1">return</span> var <span class="sy0">+</span> <span class="st0">&quot;=&quot;</span> <span class="sy0">+</span> val;
    <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> result <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span>;
    <span class="kw1">do</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> data <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>dVars, <span class="nu0">0</span><span class="br0">&#41;</span>, <span class="br0">&#91;</span><span class="st0">&quot;=&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> k <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">0</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span>k <span class="sy0">==</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span> <span class="kw1">jump</span> continue;
        <span class="kw1">if</span><span class="br0">&#40;</span>k <span class="sy0">==</span> var <span class="sy0">&amp;&amp;</span> val <span class="sy0">==</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span> <span class="kw1">jump</span> continue;
        <span class="kw1">if</span><span class="br0">&#40;</span>k <span class="sy0">==</span> var<span class="br0">&#41;</span> <span class="br0">&#123;</span>
            result <span class="sy0">+=</span> k <span class="sy0">+</span> <span class="st0">&quot;=&quot;</span> <span class="sy0">+</span> val;
            val <span class="sy0">=</span> <span class="st0">&quot;&quot;</span>;
            <span class="kw1">jump</span> continue;
        <span class="br0">&#125;</span>
        <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> v <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">1</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span>v <span class="sy0">==</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span> <span class="kw1">jump</span> continue;
        result <span class="sy0">+=</span> k <span class="sy0">+</span> <span class="st0">&quot;=&quot;</span> <span class="sy0">+</span> v;
@continue;
        dVars <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llDeleteSubList"><span class="kw5">llDeleteSubList</span></a><span class="br0">&#40;</span>dVars, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span> <span class="kw1">while</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetListLength"><span class="kw5">llGetListLength</span></a><span class="br0">&#40;</span>dVars<span class="br0">&#41;</span><span class="br0">&#41;</span>;
    <span class="kw1">if</span><span class="br0">&#40;</span>val <span class="sy0">!=</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span> result <span class="sy0">+=</span> var <span class="sy0">+</span> <span class="st0">&quot;=&quot;</span> <span class="sy0">+</span> val;
    <span class="kw1">return</span> <a href="http://wiki.secondlife.com/wiki/llDumpList2String"><span class="kw5">llDumpList2String</span></a><span class="br0">&#40;</span>result, <span class="st0">&quot;&amp;&quot;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<span class="co1">//    Copyright (C) 2013 Wizardry and Steamworks - License: GNU GPLv3    //</span>
<span class="co1">///////////////////////////////////////////////////////////////////////////</span>
<a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> wasKeyValueDelete<span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> var, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> kvp<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> dVars <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>kvp, <span class="br0">&#91;</span><span class="st0">&quot;&amp;&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
    <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> result <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span>;
    <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> added <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span>;
    <span class="kw1">do</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> data <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>dVars, <span class="nu0">0</span><span class="br0">&#41;</span>, <span class="br0">&#91;</span><span class="st0">&quot;=&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> k <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">0</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span>k <span class="sy0">==</span> var<span class="br0">&#41;</span> <span class="kw1">jump</span> continue;
        <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> v <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">1</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span>v <span class="sy0">==</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span> <span class="kw1">jump</span> continue;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llListFindList"><span class="kw5">llListFindList</span></a><span class="br0">&#40;</span>added, <span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a><span class="br0">&#41;</span>k<span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">jump</span> continue;
        result <span class="sy0">+=</span> k <span class="sy0">+</span> <span class="st0">&quot;=&quot;</span> <span class="sy0">+</span> v;
        added <span class="sy0">+=</span> k;
@continue;
        dVars <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llDeleteSubList"><span class="kw5">llDeleteSubList</span></a><span class="br0">&#40;</span>dVars, <span class="nu0">0</span> ,<span class="nu0">0</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span> <span class="kw1">while</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetListLength"><span class="kw5">llGetListLength</span></a><span class="br0">&#40;</span>dVars<span class="br0">&#41;</span><span class="br0">&#41;</span>;
    <span class="kw1">return</span> <a href="http://wiki.secondlife.com/wiki/llDumpList2String"><span class="kw5">llDumpList2String</span></a><span class="br0">&#40;</span>result, <span class="st0">&quot;&amp;&quot;</span><span class="br0">&#41;</span>;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">// Vector that will be filled by the script with</span>
<span class="co1">// the initial starting position in region coordinates.</span>
<a href="http://wiki.secondlife.com/wiki/vector"><span class="kw4">vector</span></a> iPos <span class="sy0">=</span> <span class="kw2">ZERO_VECTOR</span>;
<span class="co1">// Storage for destination position.</span>
<a href="http://wiki.secondlife.com/wiki/vector"><span class="kw4">vector</span></a> dPos <span class="sy0">=</span> <span class="kw2">ZERO_VECTOR</span>;
<span class="co1">// Storage for the NPC script.</span>
<a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> npcScript <span class="sy0">=</span> <span class="br0">&#91;</span><span class="br0">&#93;</span>;
<span class="co1">// Storage for the next action.</span>
<a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> npcAction <span class="sy0">=</span> <span class="st0">&quot;&quot;</span>;
<a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> npcParams <span class="sy0">=</span> <span class="st0">&quot;&quot;</span>;
<span class="co1">// Storage for talking on local chat.</span>
<a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> npcSay <span class="sy0">=</span> <span class="st0">&quot;&quot;</span>;
&nbsp;
<a href="http://wiki.secondlife.com/wiki/default"><span class="kw5">default</span></a> <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        osNpcRemove<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">5</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        npcScript <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>osGetNotecard<span class="br0">&#40;</span><span class="st0">&quot;Script&quot;</span><span class="br0">&#41;</span>, <span class="br0">&#91;</span><span class="st0">&quot;<span class="es0">\n</span>&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetListLength"><span class="kw5">llGetListLength</span></a><span class="br0">&#40;</span>npcScript<span class="br0">&#41;</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/llSay"><span class="kw5">llSay</span></a><span class="br0">&#40;</span><span class="kw2">DEBUG_CHANNEL</span>, <span class="st0">&quot;No script notecard found.&quot;</span><span class="br0">&#41;</span>;
            <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
            <span class="kw1">return</span>;
        <span class="br0">&#125;</span>
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> script;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> script
<span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
@ignore;
        <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> next <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>npcScript, <span class="nu0">0</span><span class="br0">&#41;</span>;
        npcScript <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llDeleteSubList"><span class="kw5">llDeleteSubList</span></a><span class="br0">&#40;</span>npcScript, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span>;
        npcScript <span class="sy0">+=</span> next;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetSubString"><span class="kw5">llGetSubString</span></a><span class="br0">&#40;</span>next, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="st0">&quot;@&quot;</span><span class="br0">&#41;</span> <span class="kw1">jump</span> ignore;
        <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> data  <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>next, <span class="br0">&#91;</span><span class="st0">&quot;=&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
        npcAction <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llToLower"><span class="kw5">llToLower</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llStringTrim"><span class="kw5">llStringTrim</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">0</span><span class="br0">&#41;</span>, <span class="kw2">STRING_TRIM</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        npcParams <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llStringTrim"><span class="kw5">llStringTrim</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">1</span><span class="br0">&#41;</span>, <span class="kw2">STRING_TRIM</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
@commands;
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@spawn&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> lastIdx <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llGetListLength"><span class="kw5">llGetListLength</span></a><span class="br0">&#40;</span>npcScript<span class="br0">&#41;</span><span class="sy0">-</span><span class="nu0">1</span>;
            npcScript <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llDeleteSubList"><span class="kw5">llDeleteSubList</span></a><span class="br0">&#40;</span>npcScript, lastIdx, lastIdx<span class="br0">&#41;</span>;
            <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> spawnData <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>npcParams, <span class="br0">&#91;</span><span class="st0">&quot;|&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;name&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>spawnData, <span class="nu0">0</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> spawnDest <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>spawnData, <span class="nu0">1</span><span class="br0">&#41;</span>, <span class="br0">&#91;</span><span class="st0">&quot;&lt;&quot;</span>, <span class="st0">&quot;,&quot;</span>, <span class="st0">&quot;&gt;&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
            iPos.x <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2Float"><span class="kw5">llList2Float</span></a><span class="br0">&#40;</span>spawnDest, <span class="nu0">0</span><span class="br0">&#41;</span>;
            iPos.y <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2Float"><span class="kw5">llList2Float</span></a><span class="br0">&#40;</span>spawnDest, <span class="nu0">1</span><span class="br0">&#41;</span>;
            iPos.z <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2Float"><span class="kw5">llList2Float</span></a><span class="br0">&#40;</span>spawnDest, <span class="nu0">2</span><span class="br0">&#41;</span>;
            <span class="kw1">state</span> spawn;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@goto&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> lastIdx <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llGetListLength"><span class="kw5">llGetListLength</span></a><span class="br0">&#40;</span>npcScript<span class="br0">&#41;</span><span class="sy0">-</span><span class="nu0">1</span>;
            npcScript <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llDeleteSubList"><span class="kw5">llDeleteSubList</span></a><span class="br0">&#40;</span>npcScript, lastIdx, lastIdx<span class="br0">&#41;</span>;
            <span class="co1">// Wind commands till goto label.</span>
@wind;
            <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> next <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>npcScript, <span class="nu0">0</span><span class="br0">&#41;</span>;
            npcScript <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llDeleteSubList"><span class="kw5">llDeleteSubList</span></a><span class="br0">&#40;</span>npcScript, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span>;
            npcScript <span class="sy0">+=</span> next;
            <span class="kw1">if</span><span class="br0">&#40;</span>next <span class="sy0">!=</span> npcParams<span class="br0">&#41;</span> <span class="kw1">jump</span> wind;
            <span class="co1">// Wind the label too.</span>
            next <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>npcScript, <span class="nu0">0</span><span class="br0">&#41;</span>;
            npcScript <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llDeleteSubList"><span class="kw5">llDeleteSubList</span></a><span class="br0">&#40;</span>npcScript, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span>;
            npcScript <span class="sy0">+=</span> next;
            <span class="co1">// Get next command.</span>
            <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> data  <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>next, <span class="br0">&#91;</span><span class="st0">&quot;=&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
            npcAction <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llToLower"><span class="kw5">llToLower</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llStringTrim"><span class="kw5">llStringTrim</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">0</span><span class="br0">&#41;</span>, <span class="kw2">STRING_TRIM</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            npcParams <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llStringTrim"><span class="kw5">llStringTrim</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>data, <span class="nu0">1</span><span class="br0">&#41;</span>, <span class="kw2">STRING_TRIM</span><span class="br0">&#41;</span>;
            <span class="co1">// Reschedule.</span>
            <span class="kw1">jump</span> commands;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@walk&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> dest <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>npcParams, <span class="br0">&#91;</span><span class="st0">&quot;&lt;&quot;</span>, <span class="st0">&quot;,&quot;</span>, <span class="st0">&quot;&gt;&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
            dPos.x <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2Float"><span class="kw5">llList2Float</span></a><span class="br0">&#40;</span>dest, <span class="nu0">0</span><span class="br0">&#41;</span>;
            dPos.y <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2Float"><span class="kw5">llList2Float</span></a><span class="br0">&#40;</span>dest, <span class="nu0">1</span><span class="br0">&#41;</span>;
            dPos.z <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llList2Float"><span class="kw5">llList2Float</span></a><span class="br0">&#40;</span>dest, <span class="nu0">2</span><span class="br0">&#41;</span>;
            <span class="kw1">state</span> walk;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@say&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            npcSay <span class="sy0">=</span> npcParams;
            <span class="kw1">state</span> say;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@pause&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;pause&quot;</span>, npcParams, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <span class="kw1">state</span> pause;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@wander&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> wanderData <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>npcParams, <span class="br0">&#91;</span><span class="st0">&quot;|&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;wd&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>wanderData, <span class="nu0">0</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;wc&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>wanderData, <span class="nu0">1</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            iPos <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llGetPos"><span class="kw5">llGetPos</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
            <span class="kw1">state</span> wander;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@rotate&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;rot&quot;</span>, npcParams, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <span class="kw1">state</span> rotate;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@sit&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;sit&quot;</span>, npcParams, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <span class="kw1">state</span> sit;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@stand&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">state</span> stand;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@stop&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">state</span> stop;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@delete&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="kw1">state</span> delete;
        <span class="br0">&#125;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>npcAction <span class="sy0">==</span> <span class="st0">&quot;@animate&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> animateData <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>npcParams, <span class="br0">&#91;</span><span class="st0">&quot;|&quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;an&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>animateData, <span class="nu0">0</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;at&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>animateData, <span class="nu0">1</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <span class="kw1">state</span> animate;
        <span class="br0">&#125;</span>
        <a href="http://wiki.secondlife.com/wiki/llSay"><span class="kw5">llSay</span></a><span class="br0">&#40;</span><span class="kw2">DEBUG_CHANNEL</span>, <span class="st0">&quot;ERROR: Unrecognized script line: &quot;</span> <span class="sy0">+</span> npcAction <span class="sy0">+</span> <span class="st0">&quot;=&quot;</span> <span class="sy0">+</span> npcParams<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> rotate <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        osNpcSetRot<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llEuler2Rot"><span class="kw5">llEuler2Rot</span></a><span class="br0">&#40;</span><span class="sy0">&lt;</span><span class="nu0">0</span>,<span class="nu0">0</span>,<span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/float"><span class="kw4">float</span></a><span class="br0">&#41;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;rot&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">&gt;</span> <span class="sy0">*</span> <span class="kw2">DEG_TO_RAD</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/link_message"><span class="kw3">link_message</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> sender, <a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> str, <a href="http://wiki.secondlife.com/wiki/key"><span class="kw4">key</span></a> id<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>id <span class="sy0">!=</span> <span class="st0">&quot;@npc_say&quot;</span><span class="br0">&#41;</span> <span class="kw1">return</span>;
        osNpcSay<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, str<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueDelete<span class="br0">&#40;</span><span class="st0">&quot;rot&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> script;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> sit <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llSensorRepeat"><span class="kw5">llSensorRepeat</span></a><span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;sit&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;&quot;</span>, <span class="kw2">PASSIVE</span><span class="sy0">|</span><span class="kw2">ACTIVE</span>, <span class="kw2">TWO_PI</span>, <span class="nu0">96</span>, <span class="nu0">1</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/sensor"><span class="kw3">sensor</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llSensorRemove"><span class="kw5">llSensorRemove</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
        osNpcSit<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llDetectedKey"><span class="kw5">llDetectedKey</span></a><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>, OS_NPC_SIT_NOW<span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueDelete<span class="br0">&#40;</span><span class="st0">&quot;sit&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> script;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> stand <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        osNpcStand<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> script;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> animate <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;an&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcPlayAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;an&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a><span class="br0">&#41;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;at&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/link_message"><span class="kw3">link_message</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> sender, <a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> str, <a href="http://wiki.secondlife.com/wiki/key"><span class="kw4">key</span></a> id<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>id <span class="sy0">!=</span> <span class="st0">&quot;@npc_say&quot;</span><span class="br0">&#41;</span> <span class="kw1">return</span>;
        osNpcSay<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, str<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;an&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcStopAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;an&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueDelete<span class="br0">&#40;</span><span class="st0">&quot;an&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueDelete<span class="br0">&#40;</span><span class="st0">&quot;at&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> script;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> spawn
<span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/list"><span class="kw4">list</span></a> name <span class="sy0">=</span> <a href="http://wiki.secondlife.com/wiki/llParseString2List"><span class="kw5">llParseString2List</span></a><span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;name&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="br0">&#91;</span><span class="st0">&quot; &quot;</span><span class="br0">&#93;</span>, <span class="br0">&#91;</span><span class="br0">&#93;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, osNpcCreate<span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>name, <span class="nu0">0</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llList2String"><span class="kw5">llList2String</span></a><span class="br0">&#40;</span>name, <span class="nu0">1</span><span class="br0">&#41;</span>, iPos, <span class="st0">&quot;appearance&quot;</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        osNpcLoadAppearance<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;appearance&quot;</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcPlayAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcStopAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueDelete<span class="br0">&#40;</span><span class="st0">&quot;name&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> script;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> delete <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        osNpcRemove<span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> stop <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcPlayAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/link_message"><span class="kw3">link_message</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> sender, <a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> str, <a href="http://wiki.secondlife.com/wiki/key"><span class="kw4">key</span></a> id<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>id <span class="sy0">!=</span> <span class="st0">&quot;@npc_say&quot;</span><span class="br0">&#41;</span> <span class="kw1">return</span>;
        osNpcSay<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, str<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> walk <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Walk&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcPlayAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Walk&quot;</span><span class="br0">&#41;</span>;
        osNpcMoveToTarget<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, dPos, OS_NPC_NO_FLY<span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/link_message"><span class="kw3">link_message</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> sender, <a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> str, <a href="http://wiki.secondlife.com/wiki/key"><span class="kw4">key</span></a> id<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>id <span class="sy0">!=</span> <span class="st0">&quot;@npc_say&quot;</span><span class="br0">&#41;</span> <span class="kw1">return</span>;
        osNpcSay<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, str<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llVecDist"><span class="kw5">llVecDist</span></a><span class="br0">&#40;</span>osNpcGetPos<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, dPos<span class="br0">&#41;</span> <span class="sy0">&gt;</span> <span class="nu0">2</span><span class="br0">&#41;</span> <span class="kw1">return</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Walk&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcStopAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Walk&quot;</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> script;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> say <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        osNpcSay<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, npcSay<span class="br0">&#41;</span>;
        npcSay <span class="sy0">=</span> <span class="st0">&quot;&quot;</span>;
        <span class="kw1">state</span> script;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> wander
<span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        dPos <span class="sy0">=</span> iPos <span class="sy0">+</span> wasCirclePoint<span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a><span class="br0">&#41;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;wd&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Walk&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcPlayAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Walk&quot;</span><span class="br0">&#41;</span>;
        osNpcMoveToTarget<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, dPos, OS_NPC_NO_FLY<span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">0.1</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/link_message"><span class="kw3">link_message</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> sender, <a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> str, <a href="http://wiki.secondlife.com/wiki/key"><span class="kw4">key</span></a> id<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>id <span class="sy0">!=</span> <span class="st0">&quot;@npc_say&quot;</span><span class="br0">&#41;</span> <span class="kw1">return</span>;
        osNpcSay<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, str<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llVecDist"><span class="kw5">llVecDist</span></a><span class="br0">&#40;</span>osNpcGetPos<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, dPos<span class="br0">&#41;</span> <span class="sy0">&gt;</span> <span class="nu0">2</span><span class="br0">&#41;</span> <span class="kw1">return</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Walk&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcStopAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Walk&quot;</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;wc&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st0">&quot;0&quot;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueDelete<span class="br0">&#40;</span><span class="st0">&quot;wc&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueDelete<span class="br0">&#40;</span><span class="st0">&quot;wd&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
            <span class="kw1">state</span> script;
        <span class="br0">&#125;</span>
        <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueSet<span class="br0">&#40;</span><span class="st0">&quot;wc&quot;</span>, <span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a><span class="br0">&#41;</span><span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a><span class="br0">&#41;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;wc&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> wait;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> wait <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcPlayAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span>ANIMATION_CYCLE_TIME<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/link_message"><span class="kw3">link_message</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> sender, <a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> str, <a href="http://wiki.secondlife.com/wiki/key"><span class="kw4">key</span></a> id<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>id <span class="sy0">!=</span> <span class="st0">&quot;@npc_say&quot;</span><span class="br0">&#41;</span> <span class="kw1">return</span>;
        osNpcSay<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, str<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcStopAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> wander;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">state</span> pause <span class="br0">&#123;</span>
    <a href="http://wiki.secondlife.com/wiki/state_entry"><span class="kw3">state_entry</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcPlayAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span>ANIMATION_CYCLE_TIME <span class="sy0">*</span> <span class="nu0">1</span><span class="sy0">+</span><a href="http://wiki.secondlife.com/wiki/llFrand"><span class="kw5">llFrand</span></a><span class="br0">&#40;</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a><span class="br0">&#41;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;pause&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/link_message"><span class="kw3">link_message</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> sender, <a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num, <a href="http://wiki.secondlife.com/wiki/string"><span class="kw4">string</span></a> str, <a href="http://wiki.secondlife.com/wiki/key"><span class="kw4">key</span></a> id<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>id <span class="sy0">!=</span> <span class="st0">&quot;@npc_say&quot;</span><span class="br0">&#41;</span> <span class="kw1">return</span>;
        osNpcSay<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, str<span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/timer"><span class="kw3">timer</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llSetTimerEvent"><span class="kw5">llSetTimerEvent</span></a><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span>;
        <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/llGetInventoryType"><span class="kw5">llGetInventoryType</span></a><span class="br0">&#40;</span><span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw2">INVENTORY_ANIMATION</span><span class="br0">&#41;</span> osNpcStopAnimation<span class="br0">&#40;</span>wasKeyValueGet<span class="br0">&#40;</span><span class="st0">&quot;key&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>, <span class="st0">&quot;Stand&quot;</span><span class="br0">&#41;</span>;
        <a href="http://wiki.secondlife.com/wiki/llSetObjectDesc"><span class="kw5">llSetObjectDesc</span></a><span class="br0">&#40;</span>wasKeyValueDelete<span class="br0">&#40;</span><span class="st0">&quot;pause&quot;</span>, <a href="http://wiki.secondlife.com/wiki/llGetObjectDesc"><span class="kw5">llGetObjectDesc</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
        <span class="kw1">state</span> script;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/changed"><span class="kw3">changed</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> change<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span>change <span class="sy0">&amp;</span> <span class="kw2">CHANGED_REGION_START</span><span class="br0">&#41;</span> <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
    <a href="http://wiki.secondlife.com/wiki/on_rez"><span class="kw3">on_rez</span></a><span class="br0">&#40;</span><a href="http://wiki.secondlife.com/wiki/integer"><span class="kw4">integer</span></a> num<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <a href="http://wiki.secondlife.com/wiki/llResetScript"><span class="kw5">llResetScript</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span>;
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</dd></dl>

</div>

                    <!-- wikipage stop -->
                                    </div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <div class="docInfo"><bdi>opensim/npc/puppeteer.txt</bdi> Â· Last modified: 2022/04/19 09:28 (external edit)</div>

            <!-- PAGE ACTIONS -->
            <!-- <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Revisions [O]"><span>Revisions</span></a></li><li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer?do=export_pdf"  class="action export_pdf" rel="nofollow" title="Export to PDF"><span>Export to PDF</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div>--><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer">
    <!-- <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div> -->

		<!-- BREADCRUMBS -->
					<div class="breadcrumbs">
									<div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim" class="wikilink1" title="opensim" data-wiki-id="opensim">opensim</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc" class="wikilink1" title="opensim:npc" data-wiki-id="opensim:npc">npc</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer" class="wikilink1" title="opensim:npc:puppeteer" data-wiki-id="opensim:npc:puppeteer">puppeteer</a></bdi></div>
											</div>
		
		<!-- ********** BOTTOM BAR ********** -->
		<div class="bar" id="bar__bottom">
		  <div class="bar-left" id="bar__bottomleft">
			<form class="button btn_login" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer"><div class="no"><input type="hidden" name="do" value="login" /><input type="hidden" name="sectok" value="" /><button type="submit" title="Log In">Log In</button></div></form>						<form class="button btn_revs" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer"><div class="no"><input type="hidden" name="do" value="revisions" /><button type="submit" accesskey="o" title="Revisions [O]">Revisions</button></div></form>			                        <form class="button btn_pdf" action="?do=export_pdf" method="POST">
                            <button type="submit" title="PDF">PDF</button>
                        </form>
		  </div>
		  <div class="bar-center">
                        <form class="button btn_home" action="/" method="POST">
                            <button type="submit" title="Home">Home</button>
                        </form>
			<form action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="opensim:npc:puppeteer" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>			<!-- <form id="osssearchform" method="get" action="renderer">
        <input type="hidden" name="use" value="grimore.org">
        <input type="hidden" name="name" value="default">
        <input type="text" id="osssearchbox" name="query">
        <input type="hidden" name="login" value="search">
        <input type="hidden" name="key" value="1a5f74ab3f4df6ce883c4c158540e25e">
        <input type="submit" value="Search">
</form>
 -->
		  </div>
		  <div class="bar-right" id="bar__bottomright">
                        <form class="button btn_contact" action="mailto:%6F%66%66%69%63%65%40%67%72%69%6D%6F%72%65%2E%6F%72%67" method="POST">
                            <button type="submit" title="Contact">Contact</button>
                        </form>
                        <form class="button btn_news" action="/feed.php?mode=recent&amp;type=rss" method="POST">
                            <button type="submit" title="News">News</button>
                        </form>
			<form class="button btn_admin" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/opensim/npc/puppeteer"><div class="no"><input type="hidden" name="do" value="admin" /><button type="submit" title="Admin">Admin</button></div></form>								  </div>
		  		</div>

		
</div><!-- /footer -->

<div style="text-align: center;">
    <div style="display:inline-block;">
      <p>
        <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion">
          <img src="/lib/tpl/was/images/button-tor.png" alt="Access website using Tor" />
        </a> 
        <a href="http://ioujrf2uwqairs7l3vyvqp7n2pia3x3wg5w5qtcqvg32zezuezza.b32.i2p/" />
          <img src="/lib/tpl/was/images/button-i2p.png" alt="Access website using i2p" />
        </a>
        <a href="http://pgp.grimore.org/" />
          <img src="/lib/tpl/was/images/button-pgp.png" alt="Wizardry and Steamworks PGP Key" />
        </a>
      </p>
    </div>
<!--    <div style="display:inline-block;">
      <p>
        <a href="http://ij4lpzuyyng6cc4jw5mxibcyjv4rx4uk6x5jijoduglkgjh7mmya.b32.i2p">
          <img src="/lib/tpl/was/images/button-i2p.png" alt="Access website using i2p" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="http://cydia.grimore.org/">
          <img src="/lib/tpl/was/images/button-cydia.png" alt="Wizardry and Steamworks Cydia Repository" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="http://debian.grimore.org/">
          <img src="/lib/tpl/was/images/button-debian.png" alt="Wizardry and Steamworks Debian Repository" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="/opt/pasteboard/" rel="external nofollow">
          <img src="/lib/tpl/was/images/button-live.png" alt="Live Pasteboard" />
        </a> 
      </p>
    </div> -->
    
<br/>

    <p>
      For the copyright, license, warranty and privacy terms for the usage of this website please see the <a
      href="/wiki:license">license</a>, <a href="/wiki:privacy">privacy</a>, <a
      href="/wiki:copyright">copyright</a>
      and the <a href="/wiki:plagiarism">plagiarism</a> pages.
    </p>
</div>
    </div></div><!-- /site -->

    <div class="no"><img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/taskrunner.php?id=opensim%3Anpc%3Apuppeteer&amp;1657308008" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if lte IE 8 ]></div><![endif]-->
</body>
</html>
