<!DOCTYPE html>
<html lang="was" dir="ltr" class="no-js">
<head>
    <meta charset="utf-8" />
    <title>fuss:dokuwiki [Wizardry and Steamworks]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="fuss,dokuwiki"/>
<link rel="search" type="application/opensearchdescription+xml" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/opensearch.php" title="Wizardry and Steamworks"/>
<link rel="start" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/"/>
<link rel="contents" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki?do=index" title="Sitemap"/>
<link rel="manifest" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Changes" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/feed.php?mode=list&amp;ns=fuss"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_export/xhtml/fuss/dokuwiki"/>
<link rel="canonical" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki"/>
<link rel="stylesheet" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/css.php?t=was&amp;tseed=24551d22639bdaeb736aec3dca86fd82"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='fuss';var JSINFO = {"plugin_imagemap_mldummy":"http:\/\/3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion\/_media\/wiki\/dokuwiki-128.png","isadmin":0,"isauth":0,"plugin_pdfjs":{"hide_download_button":0},"plugins":{"vshare":{"youtube":"youtube\\.com\/.*[&?]v=([a-z0-9_\\-]+)","vimeo":"vimeo\\.com\\\/(\\d+)","slideshare":"slideshare.*id=(\\d+)","dailymotion":"dailymotion\\.com\/video\/([a-z0-9]+)","archiveorg":"archive\\.org\/(?:embed|details)\/([a-zA-Z0-9_\\-]+)","soundcloud":"soundcloud\\.com\/([\\w-]+\/[\\w-]+)","niconico":"nicovideo\\.jp\/watch\/(sm[0-9]+)","bitchute":"bitchute\\.com\\\/video\\\/([a-zA-Z0-9_\\-]+)","coub":"coub\\.com\\\/view\\\/([a-zA-Z0-9_\\-]+)","odysee":"odysee\\.com\/\\$\/(?:embed|download)\/([-%_?=\/a-zA-Z0-9]+)","youku":"v\\.youku\\.com\/v_show\/id_([0-9A-Za-z=]+)\\.html","bilibili":"bilibili\\.com\\\/video\\\/(BV[0-9A-Za-z]+)","msoffice":"(?:office\\.com.*[&?]videoid=([a-z0-9\\-]+))","msstream":"microsoftstream\\.com\\\/video\\\/([a-f0-9\\-]{36})"}},"id":"fuss:dokuwiki","namespace":"fuss","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script charset="utf-8" src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/jquery.php?tseed=34a552433bc33cc9c3bc32527289a0b2"></script>
<script charset="utf-8" src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/js.php?t=was&amp;tseed=24551d22639bdaeb736aec3dca86fd82&amp;template=was"></script>
<!--<![endif]-->
    <!-- <link rel="shortcut icon" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/favicon.ico" />
<link rel="apple-touch-icon" href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/apple-touch-icon.png" />
 -->
    <!-- Viewport -->
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!-- Favicon -->
<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png?v=2">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png?v=2">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png?v=2">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png?v=2">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png?v=2">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png?v=2">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png?v=2">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png?v=2">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png?v=2">
<link rel="icon" type="image/png" href="/favicon-32x32.png?v=2" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png?v=2" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png?v=2" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png?v=2" sizes="16x16">
<link rel="manifest" href="/manifest.json?v=2">
<link rel="shortcut icon" href="/favicon.ico?v=2">
<meta name="apple-mobile-web-app-title" content="[Wizardry and Steamworks]">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/mstile-144x144.png?v=2">
<meta name="application-name" content="[Wizardry and Steamworks]">
<meta name="theme-color" content="#ffffff">
    <!-- <script async type="text/javascript" src="/lib/tpl/was/loadCSS.js"></script>
    <script async type="text/javascript" src="/lib/tpl/was/cssrelpreload.js"></script> -->
</head>

<body>
    <!--[if lte IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_was     ">

        
<!-- ********** HEADER ********** -->
<div id="dokuwiki__header">

	    
	<!-- ********** TOP BAR ********** -->
	<div class="bar" id="bar__top">
		<div class="bar-left" id="bar__topleft">
			<form class="button btn_login" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki"><div class="no"><input type="hidden" name="do" value="login" /><input type="hidden" name="sectok" value="" /><button type="submit" title="Log In">Log In</button></div></form>						<form class="button btn_revs" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki"><div class="no"><input type="hidden" name="do" value="revisions" /><button type="submit" accesskey="o" title="Revisions [O]">Revisions</button></div></form>						<form class="button btn_pdf" action="?do=export_pdf" method="POST">
			    <button type="submit" title="PDF">PDF</button>
                        </form>
		</div>
		<div class="bar-center">
		        <form class="button btn_home" action="/" method="POST">
                            <button type="submit" title="Home">Home</button>
                        </form>
			<form action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="fuss:dokuwiki" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>			<!-- <form id="osssearchform" method="get" action="renderer">
        <input type="hidden" name="use" value="grimore.org">
        <input type="hidden" name="name" value="default">
        <input type="text" id="osssearchbox" name="query">
        <input type="hidden" name="login" value="search">
        <input type="hidden" name="key" value="1a5f74ab3f4df6ce883c4c158540e25e">
        <input type="submit" value="Search">
</form>
 -->
		</div>
		<div class="bar-right" id="bar__topright">
		        <form class="button btn_contact" action="mailto:%6F%66%66%69%63%65%40%67%72%69%6D%6F%72%65%2E%6F%72%67" method="POST">
			    <button type="submit" title="Contact">Contact</button>
                        </form>
                        <form class="button btn_news" action="/feed.php?type=rss2&amp;ns=fuss:dokuwiki&amp;linkto=page&amp;content=abstract" method="POST">
			    <button type="submit" title="News">News</button>
                        </form>
			<form class="button btn_admin" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki"><div class="no"><input type="hidden" name="do" value="admin" /><button type="submit" title="Admin">Admin</button></div></form>								</div>
			</div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                            <div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss" class="wikilink1" title="fuss" data-wiki-id="fuss">fuss</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki" class="wikilink1" title="fuss:dokuwiki" data-wiki-id="fuss:dokuwiki">dokuwiki</a></bdi></div>
                                </div>
    
    <hr class="a11y" />
</div><!-- /header -->

        <div class="wrapper group">

            <!--  -->

            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">
                
                <!-- <div class="pageId"><span>fuss:dokuwiki</span></div> -->

                <div class="page group">
                                                            <!-- wikipage start -->
                    <!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#increase_timeout_for_synchronization">Increase Timeout for Synchronization</a></div></li>
<li class="level1"><div class="li"><a href="#add_geshi_coloring">Add GeSHi Coloring</a></div></li>
<li class="level1"><div class="li"><a href="#batch-edit_checked_boxes">Batch-Edit Checked Boxes</a></div></li>
<li class="level1"><div class="li"><a href="#enable_tikz_for_the_latex_plugin">Enable Tikz for the LaTeX Plugin</a></div></li>
<li class="level1"><div class="li"><a href="#disable_geshi_links">Disable GeSHi Links</a></div></li>
<li class="level1"><div class="li"><a href="#preview_text_before_edit_form">Preview Text Before Edit Form</a></div></li>
<li class="level1"><div class="li"><a href="#split_a_large_page_into_sub-pages">Split a Large Page into Sub-Pages</a></div></li>
<li class="level1"><div class="li"><a href="#using_tikz_with_dokuwiki_latex_plugin">Using Tikz with Dokuwiki LaTeX Plugin</a></div></li>
<li class="level1"><div class="li"><a href="#upgrade_plugins_for_php_7_compatibility">Upgrade Plugins for PHP 7 Compatibility</a></div></li>
<li class="level1"><div class="li"><a href="#password_recovery">Password Recovery</a></div></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="increase_timeout_for_synchronization">Increase Timeout for Synchronization</h1>
<div class="level1">
<pre class="code php"><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">client</span> <span class="sy0">=</span> <span class="kw2">new</span> IXR_Client<span class="br0">&#40;</span><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">profiles</span><span class="br0">&#91;</span><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">profno</span><span class="br0">&#93;</span><span class="br0">&#91;</span><span class="st_h">'server'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">client</span><span class="sy0">-&gt;</span><span class="me1">timeout</span> <span class="sy0">=</span> <span class="nu0">60</span><span class="sy0">;</span></pre>

</div>

<h1 class="sectionedit2" id="add_geshi_coloring">Add GeSHi Coloring</h1>
<div class="level1">

<p>
By default, dokuwiki uses only one template to render all the code highlighting. This is pretty restrictive given that GeSHi has language-specific highlighting. The guide on the <a href="https://www.dokuwiki.org/tips:code_css" class="urlextern" title="https://www.dokuwiki.org/tips:code_css" rel="ugc nofollow">dokuwiki page</a> will show you how to create a CSS and load that up in order to get proper syntax highlighting in dokuwiki.
</p>

</div>

<h1 class="sectionedit3" id="batch-edit_checked_boxes">Batch-Edit Checked Boxes</h1>
<div class="level1">

<p>
Add <code>checked=&quot;yes&quot;</code> to <code>admin.php</code> for <code>batchedit</code> to tick all the boxes matching the regex and replacement. Meant for the <a href="https://www.dokuwiki.org/plugin:batchedit" class="urlextern" title="https://www.dokuwiki.org/plugin:batchedit" rel="ugc nofollow">batchedit plugin</a>.
</p>
<pre class="code php"><span class="re0">$this</span><span class="sy0">-&gt;</span>_ptln<span class="br0">&#40;</span><span class="st_h">'&lt;input type=&quot;checkbox&quot; id=&quot;'</span> <span class="sy0">.</span> <span class="re0">$id</span> <span class="sy0">.</span> <span class="st_h">'&quot; name=&quot;apply['</span> <span class="sy0">.</span> <span class="re0">$id</span> <span class="sy0">.</span> <span class="st_h">']&quot; value=&quot;on&quot; checked=&quot;yes&quot;/&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>

<h1 class="sectionedit4" id="enable_tikz_for_the_latex_plugin">Enable Tikz for the LaTeX Plugin</h1>
<div class="level1">

<p>
The patch removes going through <code>dvips</code> and uses ImageMagick directly to convert <code>dvi</code> to <code>png</code> for the <a href="https://www.dokuwiki.org/plugin:latex" class="urlextern" title="https://www.dokuwiki.org/plugin:latex" rel="ugc nofollow">latex</a> plugin.
</p>
<dl class="file">
<dt><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/_export/code/fuss/dokuwiki?codeblock=2" title="Download Snippet" class="mediafile mf_diff">class.latexrender.diff</a></dt>
<dd><pre class="code file diff"><span class="re3">--- latex-original/class.latexrender.php	2011-04-29 10:53:02.000000000 +0300</span>
<span class="re4">+++ latex/class.latexrender.php	2013-03-09 21:51:06.000000000 +0200</span>
<span class="re6">@@ -51,16 +51,7 @@</span>
 		var $_font_size = <span class="nu0">10</span>;
 		var $_latexclass = &quot;article&quot;; //install extarticle class if you wish to have smaller font sizes
     var $_tmp_filename;
<span class="re7">-    // this most certainly needs to be extended. in the long term it is planned to use</span>
<span class="re7">-    // a positive list for more security. this is hopefully enough for now. i'd be glad</span>
<span class="re7">-    // to receive more bad tags !</span>
<span class="re7">-    var $_latex_tags_blacklist = array<span class="br0">&#40;</span></span>
<span class="re7">-	   &quot;include&quot;,&quot;def&quot;,&quot;command&quot;,&quot;loop&quot;,&quot;repeat&quot;,&quot;open&quot;,&quot;toks&quot;,&quot;output&quot;,&quot;input&quot;,</span>
<span class="re7">-	   &quot;catcode&quot;,&quot;name&quot;,&quot;^^&quot;,</span>
<span class="re7">-	   &quot;\\every&quot;,&quot;\\errhelp&quot;,&quot;\\errorstopmode&quot;,&quot;\\scrollmode&quot;,&quot;\\nonstopmode&quot;,&quot;\\batchmode&quot;,</span>
<span class="re7">-	   &quot;\\read&quot;,&quot;\\write&quot;,&quot;csname&quot;,&quot;\\newhelp&quot;,&quot;\\uppercase&quot;, &quot;\\lowercase&quot;,&quot;\\relax&quot;,&quot;\\aftergroup&quot;,</span>
<span class="re7">-	   &quot;\\afterassignment&quot;,&quot;\\expandafter&quot;,&quot;\\noexpand&quot;,&quot;\\special&quot;</span>
<span class="re7">-	    <span class="br0">&#41;</span>;</span>
<span class="re8">+    var $_latex_tags_blacklist = array<span class="br0">&#40;</span><span class="br0">&#41;</span>;</span>
     var $_errorcode = <span class="nu0">0</span>;
 		var $_errorextra = &quot;&quot;;
 		var $_filename;
<span class="re6">@@ -240,18 +231,13 @@</span>
 			return false;
 		<span class="br0">&#125;</span>
&nbsp;
<span class="re7">-	   // convert dvi file to postscript using dvips</span>
<span class="re7">-	   $command = $this-&gt;_dvips_path.&quot; -E &quot;.$this-&gt;_tmp_filename.&quot;.dvi&quot;.&quot; -o &quot;.$this-&gt;_tmp_filename.&quot;.ps&quot;;</span>
<span class="re7">-	   $this-&gt;myexec<span class="br0">&#40;</span>$command,$status_dvips<span class="br0">&#41;</span>;</span>
<span class="re7">-</span>
<span class="re7">-</span>
 	   // imagemagick convert ps to image and trim picture
<span class="re7">-	   $command = $this-&gt;_convert_path.&quot; &quot;.$this-&gt;_tmp_filename.&quot;.ps &quot;.</span>
<span class="re8">+	   $command = $this-&gt;_convert_path.&quot; &quot;.$this-&gt;_tmp_filename.&quot;.dvi &quot;.</span>
 				$this-&gt;_tmp_filename.&quot;.&quot;.$this-&gt;_image_format;
 	   $this-&gt;myexec<span class="br0">&#40;</span>$command,$status_convert<span class="br0">&#41;</span>;
&nbsp;
&nbsp;
<span class="re7">-		 if <span class="br0">&#40;</span>$status_dvips || $status_convert<span class="br0">&#41;</span> <span class="br0">&#123;</span></span>
<span class="re8">+		 if <span class="br0">&#40;</span>$status_convert<span class="br0">&#41;</span> <span class="br0">&#123;</span></span>
 			if<span class="br0">&#40;</span> ! $this-&gt;_keep_tmp<span class="br0">&#41;</span>
 				$this-&gt;cleanTemporaryDirectory<span class="br0">&#40;</span><span class="br0">&#41;</span>;
 			chdir<span class="br0">&#40;</span>$current_dir<span class="br0">&#41;</span>;</pre>
</dd></dl>

</div>

<h1 class="sectionedit5" id="disable_geshi_links">Disable GeSHi Links</h1>
<div class="level1">

<p>
In <code>inc/geshi.php</code> or, on more recent Dokuwiki versions <code>vendor/easybook/geshi/geshi.php</code>, change:
</p>
<pre class="code php">    <span class="kw2">var</span> <span class="re0">$keyword_links</span> <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">;</span></pre>

<p>
to:
</p>
<pre class="code php">    <span class="kw2">var</span> <span class="re0">$keyword_links</span> <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">;</span></pre>

</div>

<h1 class="sectionedit6" id="preview_text_before_edit_form">Preview Text Before Edit Form</h1>
<div class="level1">

<p>
Dokuwiki by default places the form before the preview text. This seems a little inconvenient because you are meant to pay attention at what you have written at the bottom of the page, such the having the preview window with the last lines of text at the bottom instead of on top (before your eyes) is not helpful. The following patch:
</p>
<pre class="code diff"><span class="re3">--- template.php.old	2013-05-10 12:45:54.000000000 +0000</span>
<span class="re4">+++ template.php	2013-09-03 04:27:11.000000000 +0000</span>
<span class="re6">@@ -108,8 +108,8 @@</span>
             html_edit<span class="br0">&#40;</span><span class="br0">&#41;</span>;
             break;
         case 'preview':
<span class="re7">-            html_edit<span class="br0">&#40;</span><span class="br0">&#41;</span>;</span>
             html_show<span class="br0">&#40;</span>$TEXT<span class="br0">&#41;</span>;
<span class="re8">+            html_edit<span class="br0">&#40;</span><span class="br0">&#41;</span>;</span>
             break;
         case 'draft':
             html_draft<span class="br0">&#40;</span><span class="br0">&#41;</span>;</pre>

<p>
reverses that behavior, by editing <code>inc/template.php</code> and placing the preview text above the edit box.
</p>

</div>

<h1 class="sectionedit7" id="split_a_large_page_into_sub-pages">Split a Large Page into Sub-Pages</h1>
<div class="level1">

<p>
The following PHP script reads a dokuwiki file (such as the ones under <code>data/pages</code>) and then splits the file into multiple smaller files by the title of the top-level title. The script only supports pages that contain top-level titles (in dokuwiki syntax, those pre-postfixed with six equal signs).
</p>
<pre class="code php"><span class="kw2">&lt;?php</span>
&nbsp;
<span class="co2">###########################################################################
</span><span class="co2">##  Copyright (C) Wizardry and Steamworks 2015 - License: GNU GPLv3      ##
</span><span class="co2">###########################################################################
</span><span class="co2">## This scans a dokuwiki page file and branches out all the top-level    ##
</span><span class="co2">## sections into multiple files named after the title and normalized.    ##
</span><span class="co2">###########################################################################
</span>
<span class="co2">###########################################################################
</span><span class="co2">##                            CONFIGURATION                              ##
</span><span class="co2">###########################################################################
</span>
<span class="co2"># The dokuwiki file to scan.
</span><span class="re0">$scan</span> <span class="sy0">=</span> <span class="st_h">'Workbook2.txt'</span><span class="sy0">;</span>
&nbsp;
<span class="co2"># In which directory to save the pages.
</span><span class="re0">$directory</span> <span class="sy0">=</span> <span class="st_h">'drinks'</span><span class="sy0">;</span>
&nbsp;
<span class="co2">###########################################################################
</span><span class="co2">##                               INTERNALS                               ##
</span><span class="co2">###########################################################################
</span>
<span class="kw1">if</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="re0">$handle</span> <span class="sy0">=</span> <a href="http://www.php.net/fopen"><span class="kw3">fopen</span></a><span class="br0">&#40;</span><span class="re0">$scan</span><span class="sy0">,</span> <span class="st0">&quot;r&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">===</span> <span class="kw4">FALSE</span><span class="br0">&#41;</span>
	<a href="http://www.php.net/die"><span class="kw3">die</span></a><span class="sy0">;</span>
&nbsp;
<span class="co2"># The normalization routines for Dokuwiki.	
</span><span class="re0">$pattern</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'/[\s\(\)]+?/'</span><span class="sy0">;</span>
<span class="re0">$replace</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'_'</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$pattern</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'/[\?#&quot;\'\.]+?/'</span><span class="sy0">;</span>
<span class="re0">$replace</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span>
&nbsp;
<span class="co2"># For every line in the dokuwiki document...
</span><span class="re0">$fileName</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span>
<span class="re0">$title</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span>
<span class="kw1">while</span> <span class="br0">&#40;</span><span class="br0">&#40;</span><span class="re0">$line</span> <span class="sy0">=</span> <a href="http://www.php.net/fgets"><span class="kw3">fgets</span></a><span class="br0">&#40;</span><span class="re0">$handle</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">!==</span> <span class="kw4">false</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="co2"># Check that we have a top-level section
</span>        <span class="kw1">switch</span><span class="br0">&#40;</span><a href="http://www.php.net/preg_match"><span class="kw3">preg_match</span></a><span class="br0">&#40;</span><span class="st_h">'/^====== (.+?) ======/'</span><span class="sy0">,</span> <span class="re0">$line</span><span class="sy0">,</span> <span class="re0">$matches</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
		<span class="kw1">case</span> <span class="kw4">TRUE</span><span class="sy0">:</span> <span class="co2"># if we do have a top-level section, normalize the title to a file-name...
</span>			<span class="re0">$title</span> <span class="sy0">=</span> <span class="re0">$matches</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>
			<span class="re0">$fileName</span> <span class="sy0">=</span> <a href="http://www.php.net/strtolower"><span class="kw3">strtolower</span></a><span class="br0">&#40;</span>
				<a href="http://www.php.net/preg_replace"><span class="kw3">preg_replace</span></a><span class="br0">&#40;</span>
					<span class="st_h">'/__+?/'</span><span class="sy0">,</span> 
					<span class="st_h">'_'</span><span class="sy0">,</span> 
					<a href="http://www.php.net/preg_replace"><span class="kw3">preg_replace</span></a><span class="br0">&#40;</span>
						<span class="re0">$pattern</span><span class="sy0">,</span> 
						<span class="re0">$replace</span><span class="sy0">,</span> 
						<span class="re0">$matches</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span>
						<span class="br0">&#41;</span>
				<span class="br0">&#41;</span><span class="sy0">.</span><span class="st_h">'.txt'</span>
			<span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="co2"># and create the file.
</span>			<span class="kw1">if</span><span class="br0">&#40;</span><a href="http://www.php.net/touch"><span class="kw3">touch</span></a><span class="br0">&#40;</span><span class="re0">$directory</span><span class="sy0">.</span><span class="st_h">'/'</span><span class="sy0">.</span><span class="re0">$fileName</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="kw4">false</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
				<span class="re0">$fileName</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span>
				<span class="re0">$title</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span>
				<span class="kw1">break</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
			<span class="kw1">break</span><span class="sy0">;</span>
		<span class="kw1">default</span><span class="sy0">:</span>
			<span class="co2"># if the file could not be created, skip
</span>			<span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$fileName</span> <span class="sy0">==</span> <span class="st_h">''</span><span class="br0">&#41;</span> <span class="kw1">break</span><span class="sy0">;</span>
			<span class="co2"># similarly, if the created file could not be opened in append mode then skip
</span>			<span class="kw1">if</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="re0">$df</span> <span class="sy0">=</span> <a href="http://www.php.net/fopen"><span class="kw3">fopen</span></a><span class="br0">&#40;</span><span class="re0">$directory</span><span class="sy0">.</span><span class="st_h">'/'</span><span class="sy0">.</span><span class="re0">$fileName</span><span class="sy0">,</span> <span class="st0">&quot;a&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">===</span> <span class="kw4">FALSE</span><span class="br0">&#41;</span> <span class="kw1">break</span><span class="sy0">;</span>
			<span class="kw1">switch</span><span class="br0">&#40;</span><span class="re0">$title</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
				<span class="kw1">case</span> <span class="st_h">''</span><span class="sy0">:</span> <span class="co2"># if the title has been written, skip
</span>					<span class="kw1">break</span><span class="sy0">;</span>
				<span class="kw1">default</span><span class="sy0">:</span> <span class="co2"># write the title otherwise
</span>					<a href="http://www.php.net/fwrite"><span class="kw3">fwrite</span></a><span class="br0">&#40;</span><span class="re0">$df</span><span class="sy0">,</span> <span class="st_h">'====== '</span><span class="sy0">.</span><span class="re0">$title</span><span class="sy0">.</span><span class="st_h">' ======'</span><span class="sy0">.</span>PHP_EOL<span class="br0">&#41;</span><span class="sy0">;</span>
					<span class="re0">$title</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span>
					<span class="kw1">break</span><span class="sy0">;</span>
			<span class="br0">&#125;</span>
			<span class="co2"># and write the lines to the file
</span>			<span class="kw1">if</span><span class="br0">&#40;</span><a href="http://www.php.net/fwrite"><span class="kw3">fwrite</span></a><span class="br0">&#40;</span><span class="re0">$df</span><span class="sy0">,</span> <span class="re0">$line</span><span class="br0">&#41;</span> <span class="sy0">===</span> <span class="kw4">FALSE</span><span class="br0">&#41;</span>
				<span class="kw1">echo</span> <span class="st_h">'Error writing: '</span><span class="sy0">.</span><span class="re0">$fileName</span><span class="sy0">.</span>PHP_EOL<span class="sy0">;</span>
			<span class="co2"># close the temporary file
</span>			<a href="http://www.php.net/fclose"><span class="kw3">fclose</span></a><span class="br0">&#40;</span><span class="re0">$df</span><span class="br0">&#41;</span><span class="sy0">;</span>
			<span class="kw1">break</span><span class="sy0">;</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span>
<span class="co2"># close the dokuwiki document
</span><a href="http://www.php.net/fclose"><span class="kw3">fclose</span></a><span class="br0">&#40;</span><span class="re0">$handle</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="sy1">?&gt;</span></pre>

</div>

<h1 class="sectionedit8" id="using_tikz_with_dokuwiki_latex_plugin">Using Tikz with Dokuwiki LaTeX Plugin</h1>
<div class="level1">

<p>
If you use Tikz with the Dokuwiki LaTeX plugin you may notice that it will generate very small images. This is due to the line:
</p>
<pre class="code">$command = $this-&gt;_dvips_path.&quot; -E &quot;.$this-&gt;_tmp_filename.&quot;.dvi&quot;.&quot; -o &quot;.$this-&gt;_tmp_filename.&quot;.ps&quot;;</pre>

<p>
in <code>class.latexrender.php</code> that tells <code>dvips</code> to attempt to generate an EPSF PostScript file from the DVI by drawing a tight bounding box around the text whilst ignoring graphics - and this is explicitly something that we do not want.
</p>

<p>
To remedy the situation, edit <code>class.latexrender.php</code> and change the former line to:
</p>
<pre class="code">$command = $this-&gt;_dvips_path.&quot; &quot;.$this-&gt;_tmp_filename.&quot;.dvi&quot;.&quot; -o &quot;.$this-&gt;_tmp_filename.&quot;.ps&quot;;</pre>

</div>

<h1 class="sectionedit9" id="upgrade_plugins_for_php_7_compatibility">Upgrade Plugins for PHP 7 Compatibility</h1>
<div class="level1">

<p>
Change directory from the Dokuwiki root to <code>lib/plugins/</code> and execute the following commands: 
</p>
<pre class="code bash"><span class="kw2">find</span> . <span class="re5">-type</span> f <span class="re5">-exec</span> <span class="kw2">perl</span> <span class="re5">-p</span> <span class="re5">-i</span> <span class="re5">-e</span> <span class="st_h">'s/&amp;$handler/Doku_Handler $handler/g'</span> <span class="st_h">'{}'</span> \;</pre>

<p>
and:
</p>
<pre class="code bash"><span class="kw2">find</span> . <span class="re5">-type</span> f <span class="re5">-exec</span> <span class="kw2">perl</span> <span class="re5">-p</span> <span class="re5">-i</span> <span class="re5">-e</span> <span class="st_h">'s/&amp;$renderer/Doku_Renderer $renderer/g'</span> <span class="st_h">'{}'</span> \;</pre>

</div>

<h1 class="sectionedit10" id="password_recovery">Password Recovery</h1>
<div class="level1">

<p>
In case of a lost password, add the following line to <code>conf/users.auth.php</code>:
</p>
<pre class="code">admin:$1$4fd0ad31$.cId7p1uxI4a.RcrH81On0:DokuWiki Administrator:mail@host.com:admin,user</pre>

<p>
and then login using the username <code>admin</code> and the password <code>admin</code>.
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <div class="docInfo"><bdi>fuss/dokuwiki.txt</bdi> · Last modified: 2022/04/19 09:28 (external edit)</div>

            <!-- PAGE ACTIONS -->
            <!-- <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Revisions [O]"><span>Revisions</span></a></li><li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki?do=export_pdf"  class="action export_pdf" rel="nofollow" title="Export to PDF"><span>Export to PDF</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div>--><!-- /wrapper -->

        
<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer">
    <!-- <div class="buttons">
                <a href="http://www.dokuwiki.org/donate" title="Donate" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-donate.gif" width="80" height="15" alt="Donate" /></a>
        <a href="http://www.php.net" title="Powered by PHP" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-php.gif" width="80" height="15" alt="Powered by PHP" /></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-html5.png" width="80" height="15" alt="Valid HTML5" /></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-css.png" width="80" height="15" alt="Valid CSS" /></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki" ><img
            src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/tpl/was/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" /></a>
    </div> -->

		<!-- BREADCRUMBS -->
					<div class="breadcrumbs">
									<div class="youarehere"><span class="bchead">You are here: </span><span class="home"><bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss" class="wikilink1" title="fuss" data-wiki-id="fuss">fuss</a></bdi> / <bdi><a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki" class="wikilink1" title="fuss:dokuwiki" data-wiki-id="fuss:dokuwiki">dokuwiki</a></bdi></div>
											</div>
		
		<!-- ********** BOTTOM BAR ********** -->
		<div class="bar" id="bar__bottom">
		  <div class="bar-left" id="bar__bottomleft">
			<form class="button btn_login" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki"><div class="no"><input type="hidden" name="do" value="login" /><input type="hidden" name="sectok" value="" /><button type="submit" title="Log In">Log In</button></div></form>						<form class="button btn_revs" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki"><div class="no"><input type="hidden" name="do" value="revisions" /><button type="submit" accesskey="o" title="Revisions [O]">Revisions</button></div></form>			                        <form class="button btn_pdf" action="?do=export_pdf" method="POST">
                            <button type="submit" title="PDF">PDF</button>
                        </form>
		  </div>
		  <div class="bar-center">
                        <form class="button btn_home" action="/" method="POST">
                            <button type="submit" title="Home">Home</button>
                        </form>
			<form action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/start" method="get" role="search" class="search doku_form" id="dw__search" accept-charset="utf-8"><input type="hidden" name="do" value="search" /><input type="hidden" name="id" value="fuss:dokuwiki" /><div class="no"><input name="q" type="text" class="edit" title="[F]" accesskey="f" placeholder="Search" autocomplete="on" id="qsearch__in" value="" /><button value="1" type="submit" title="Search">Search</button><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>			<!-- <form id="osssearchform" method="get" action="renderer">
        <input type="hidden" name="use" value="grimore.org">
        <input type="hidden" name="name" value="default">
        <input type="text" id="osssearchbox" name="query">
        <input type="hidden" name="login" value="search">
        <input type="hidden" name="key" value="1a5f74ab3f4df6ce883c4c158540e25e">
        <input type="submit" value="Search">
</form>
 -->
		  </div>
		  <div class="bar-right" id="bar__bottomright">
                        <form class="button btn_contact" action="mailto:%6F%66%66%69%63%65%40%67%72%69%6D%6F%72%65%2E%6F%72%67" method="POST">
                            <button type="submit" title="Contact">Contact</button>
                        </form>
                        <form class="button btn_news" action="/feed.php?mode=recent&amp;type=rss" method="POST">
                            <button type="submit" title="News">News</button>
                        </form>
			<form class="button btn_admin" method="get" action="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/fuss/dokuwiki"><div class="no"><input type="hidden" name="do" value="admin" /><button type="submit" title="Admin">Admin</button></div></form>								  </div>
		  		</div>

		
</div><!-- /footer -->

<div style="text-align: center;">
    <div style="display:inline-block;">
      <p>
        <a href="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion">
          <img src="/lib/tpl/was/images/button-tor.png" alt="Access website using Tor" />
        </a> 
        <a href="http://ioujrf2uwqairs7l3vyvqp7n2pia3x3wg5w5qtcqvg32zezuezza.b32.i2p/" />
          <img src="/lib/tpl/was/images/button-i2p.png" alt="Access website using i2p" />
        </a>
        <a href="http://pgp.grimore.org/" />
          <img src="/lib/tpl/was/images/button-pgp.png" alt="Wizardry and Steamworks PGP Key" />
        </a>
      </p>
    </div>
<!--    <div style="display:inline-block;">
      <p>
        <a href="http://ij4lpzuyyng6cc4jw5mxibcyjv4rx4uk6x5jijoduglkgjh7mmya.b32.i2p">
          <img src="/lib/tpl/was/images/button-i2p.png" alt="Access website using i2p" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="http://cydia.grimore.org/">
          <img src="/lib/tpl/was/images/button-cydia.png" alt="Wizardry and Steamworks Cydia Repository" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="http://debian.grimore.org/">
          <img src="/lib/tpl/was/images/button-debian.png" alt="Wizardry and Steamworks Debian Repository" />
        </a> 
      </p>
    </div>
    <div style="display:inline-block;">
      <p>
        <a href="/opt/pasteboard/" rel="external nofollow">
          <img src="/lib/tpl/was/images/button-live.png" alt="Live Pasteboard" />
        </a> 
      </p>
    </div> -->
    
<br/>

    <p>
      For the copyright, license, warranty and privacy terms for the usage of this website please see the <a
      href="/wiki:license">license</a>, <a href="/wiki:privacy">privacy</a>, <a
      href="/wiki:copyright">copyright</a>
      and the <a href="/wiki:plagiarism">plagiarism</a> pages.
    </p>
</div>
    </div></div><!-- /site -->

    <div class="no"><img src="http://3wymlmcsvxiaqzmbepsdawqpk6o2qsk65jhms72qqjulk5u4bgmvs3qd.onion/lib/exe/taskrunner.php?id=fuss%3Adokuwiki&amp;1657304724" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if lte IE 8 ]></div><![endif]-->
</body>
</html>
